const p=(g,m)=>{const{columns:c,rows:i}=m;if(!g)throw Error("请传入图片地址");if(!c&&!i)throw Error("请传入columns和rows");const u=()=>new Promise((n,s)=>{const t=new Image;t.setAttribute("src",g+"?"+new Date().getTime()),t.setAttribute("crossOrigin",""),t.onload=()=>{n(l(t.width,t.height,t))},t.onerror=e=>{s(e)}}),l=(n,s,t)=>{const e=document.createElement("canvas");e.width=n,e.height=s;const o=e.getContext("2d");return o.drawImage(t,0,0,n,s),d(o)},d=n=>{const s=n.canvas.width/c,t=n.canvas.height/i,e=[];for(let o=0;o<i;o++){const r=[];for(let a=0;a<c;a++){console.log("i:"+o+";k:"+a);const h=w(n,a*s,o*t,s,t);r.push(h)}e.push(...r)}return e},w=(n,s,t,e,o)=>{const r=document.createElement("canvas");r.width=e,r.height=o;const a=n.getImageData(s,t,e,o);return r.getContext("2d").putImageData(a,0,0),r.toDataURL("image/png",1)};return{getImages:u}};export{p as useSplit};
