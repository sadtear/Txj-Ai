import{v as El,l as Dl,a3 as Il,f as zl,a5 as Ll,r,g as Ul,au as Ml,aU as Jl,L as Tl,o as c,c as _,b as o,w as i,a as e,F as y,i as b,h as p,d as w,m as S,q as G,t as h,a6 as we,aF as Nl,k as z,aC as Fe,aV as $l,aD as Bl,aM as Gl,aN as ql,a4 as jl,D as Ol,E as Fl,n as A,aW as Re,as as We,aT as He,ap as q,a9 as Pe,aE as Rl,p as Wl,e as Hl,aO as Pl}from"./entry.35d4c246.js";import{E as Al}from"./index.d44e751f.js";import{E as Kl}from"./el-card.6e2af8d2.js";import{E as Ql}from"./index.93e13010.js";import{E as Xl,a as Yl}from"./index.d4a9ac2e.js";import{E as Zl,b as et,a as lt}from"./el-collapse.8f120924.js";import{E as tt}from"./el-row.5cfa1389.js";import{b as at}from"./index.2f982f63.js";import{E as st}from"./index.6f30e63e.js";import{E as ot}from"./index.e24e47ce.js";import{b as nt,E as it,a as rt}from"./index.85266373.js";import{E as ut}from"./index.6bed96cc.js";import{E as ct}from"./index.1fc0ea57.js";import{_ as dt}from"./layout.bd874b6a.js";/* empty css                */import"./el-tooltip.4ed993c7.js";/* empty css                  *//* empty css                  *//* empty css                  *//* empty css                     */import{E as vt}from"./el-checkbox.ff0ca7d1.js";/* empty css                   *//* empty css                    *//* empty css                        *//* empty css                    */import{e as pt,_ as _t}from"./errorImg.685080e1.js";import{b as mt}from"./create.65762b44.js";import{L as Ae}from"./index.2081050d.js";import Ke from"./keyword-suggestion.88dc6c88.js";import{g as ft}from"./generateDetails.bda147ca.js";import{c as ht,t as gt}from"./typeLIst.1ff2b2b6.js";import{c as yt,k as bt,a as wt,b as xt}from"./drawing.998ab448.js";import{_ as kt}from"./_plugin-vue_export-helper.c27b6911.js";import"./refs.179b14af.js";import"./strings.b7c92e5e.js";import"./isEqual.97080887.js";import"./_getTag.0a62c0db.js";import"./debounce.7d5a41e6.js";import"./castArray.048c84c6.js";import"./index.540b2914.js";import"./dropdown.72fdcde9.js";import"./throttle.203d98ad.js";import"./position.fdd244ba.js";import"./empty_news.49a3869c.js";import"./index.f1996257.js";import"./el-tabs.de01d035.js";import"./index.341c05ee.js";import"./el-result.1b1852fa.js";import"./index.89951fb8.js";import"./_commonjsHelpers.87174ba5.js";const f=K=>(Wl("data-v-56deda0e"),K=K(),Hl(),K),St={class:"outContainer"},Ct={class:"right"},Vt={class:"scrollbar-demo-item"},Et={class:"demo-tabs tsc"},Dt=["onClick"],It={key:0},zt={class:"tsc"},Lt=f(()=>e("strong",{class:"cueword"},"提示词",-1)),Ut={class:"length-suffix justify-end"},Mt={class:"flex items-center cursor-pointer text-base",style:{margin:"8px 0"}},Jt=f(()=>e("span",{class:""},"随便试试:",-1)),Tt={class:"flex truncate"},Nt=["onClick"],$t={class:"mx"},Bt={class:"czfg"},Gt=f(()=>e("strong",null," 创作风格 ",-1)),qt=["src"],jt={class:"size"},Ot=f(()=>e("p",{class:"qi"},"奇想智能，通用万能模型",-1)),Ft={class:"styleMod"},Rt=f(()=>e("div",{class:"qb"},[e("p",null,"全部"),e("div")],-1)),Wt={class:"setScrollbar"},Ht={class:"itemimg",style:{display:"grid","grid-template-columns":"repeat(5, 1fr)"}},Pt=["onClick"],At=["src"],Kt={class:"size"},Qt=f(()=>e("p",{class:"qi"},"奇想智能，通用万能模型",-1)),Xt={class:"demo-collapse"},Yt={class:"dropdown"},Zt=f(()=>e("p",{class:"draw"},"画面尺寸",-1)),ea={class:"tooltip-base-box"},la={class:"row center"},ta={class:""},aa=f(()=>e("div",{class:"dropdown"},[e("div",{class:"draw"},"图片质量")],-1)),sa={class:"selector"},oa={class:"dropdown",style:{position:"relative"}},na=f(()=>e("p",{class:"draw"},"生成张数",-1)),ia={class:"tooltip-base-box"},ra={class:"row center"},ua={class:"slider-demo-block"},ca=["onClick"],da={key:1},va={class:"tsc"},pa=f(()=>e("strong",{class:"cueword"},"提示词",-1)),_a={class:"length-suffix justify-end"},ma={class:"flex items-center cursor-pointer text-base",style:{margin:"8px 0 20px"}},fa=f(()=>e("span",{class:""},"随便试试:",-1)),ha={class:"flex truncate"},ga=["onClick"],ya=f(()=>e("strong",{class:"cueword"},"不希望呈现的内容",-1)),ba={class:""},wa={class:"czfg"},xa=f(()=>e("strong",null," 创作风格 ",-1)),ka=["src"],Sa={class:"size"},Ca=f(()=>e("p",{class:"qi"},"奇想智能，通用万能模型",-1)),Va={class:"styleMod"},Ea=f(()=>e("div",{class:"qb"},[e("p",null,"全部"),e("div")],-1)),Da={class:"setScrollbar"},Ia={class:"itemimg",style:{display:"grid","grid-template-columns":"repeat(5, 1fr)"}},za=["onClick"],La=["src"],Ua={class:"size"},Ma=f(()=>e("p",{class:"qi"},"奇想智能，通用万能模型",-1)),Ja={class:"fgmx"},Ta=f(()=>e("strong",null,"创作模型",-1)),Na={class:"slider-demo-block"},$a={class:"demo-collapse"},Ba={class:"dropdown"},Ga=f(()=>e("p",{class:"draw"},"画面尺寸",-1)),qa={class:"tooltip-base-box"},ja={class:"row center"},Oa={class:"selector"},Fa={class:"dropdown"},Ra=f(()=>e("p",{class:"draw"},"生成张数",-1)),Wa={class:"tooltip-base-box"},Ha={class:"row center"},Pa={class:"slider-demo-block"},Aa=["onClick"],Ka={class:"dropdown"},Qa=f(()=>e("p",{class:"draw"},"采样器",-1)),Xa={class:"tooltip-base-box"},Ya={class:"row center"},Za={class:"slider-demo-block"},es={class:"dropdown dropdown2"},ls=f(()=>e("p",{class:"draw"},"Seed",-1)),ts={class:"tooltip-base-box"},as={class:"row center"},ss={class:"input"},os={class:"dropdown dropdown-mb"},ns=f(()=>e("p",{class:"draw"},"面部修复",-1)),is={class:"fixedBottom"},rs={style:{display:"flex","justify-content":"space-between"}},us={style:{"font-size":"12px"}},cs={style:{"font-size":"12px"}},ds={style:{display:"flex","justify-content":"space-between"}},vs={style:{"font-size":"12px"}},ps={class:"ljsc"},_s={class:"rightshow"},ms=f(()=>e("div",{class:"allbox"},[e("span",null,"生成记录")],-1)),fs={class:"showpicture"},hs={class:"showGenerateBoxTop"},gs={class:"showGenerateBoxTopLeft"},ys={style:{"max-width":"600px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block"}},bs={class:"showGenerateBoxTopRight"},ws=f(()=>e("span",null,"|",-1)),xs={class:A(["showGenerateBoxBottom"])},ks=El({__name:"index",setup(K){const C=Dl(),xe=Il();zl();const se=Ll(),oe=r(0),x=r(null),ke=r(""),d=r("MJ"),D=r(1),Qe=r("generate"),M=r("1:1"),ne=r(1),Q=r(""),ie=r(""),re=r(!1),ue=r(!1),J=r(!1),Xe=r();r();const ce=r(!1),Ye=r([{label:"普通",value:0},{label:"高清",value:1},{label:"超清",value:2},{label:"精绘",value:3}]),Ze=r([1,4]),el=r([1,2,3,4]),Se=r(0),Ce=r(0),ll=r(["MJ","SD"]),tl=(a,t)=>{Se.value=t,D.value=a},al=(a,t)=>{Ce.value=t,I.value=a},Ve=a=>{Pl.confirm("是否删除此作品内所有图片","确认删除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{sl([a])})},sl=async a=>{const t=[];for(const s in a)t.push(a[s]);if(!t.length){we.msgError("请选择需要删除的图片");return}try{await xt(t).then(s=>{z({type:"success",message:"删除成功"})}),n.value=[],L()}catch(s){console.log("删除失败绘画记录",s)}},ol=Ul({channel:d}),j=r([]),X=r(),O=r(""),F=r(""),Ee=async()=>{j.value=[],O.value="",F.value="",X.value="",await mt(ol).then(a=>{j.value=[],j.value=a,O.value=a[0].imgUrl,F.value=a[0].name,X.value=a[0].name})};Ee();const De=a=>{O.value=a.imgUrl,F.value=a.name,X.value=a.name,U.value=!1},k=r({}),T=r({channel:d,taskId:Q}),de=r([]),ve=()=>{yt({num:2}).then(t=>{de.value=t})},Ie=a=>{let t;if(a=="mj"){if(E.value.trim()==""){we.msgError("请输入描述词");return}t=E.value}else{if(V.value.trim()==""){we.msgError("请输入描述词");return}t=V.value}bt({prompt:t}).then(s=>{a=="mj"?E.value=s.promptEn:V.value=s.promptEn})},ze=(a,t)=>{t=="mj"?E.value=a:V.value=a},n=r([]),L=a=>{N.value=0,wt({pageNo:1,pageSize:5,drawType:1}).then(s=>{if(a!="no"&&(n.value=s.lists),a!="no"){if(!C.timer&&n.value.length>0){for(const u in n.value)if(n.value[u].progress!="100%"){if(d.value=="MJ"&&C.userInfo.balanceDraw>D.value*2){x.value=!0,n.value[u].born=!0,n.value[u].LoseStatus=!1,T.value.channel=n.value[u].channel,T.value.taskId=n.value[u].taskId,$("no");return}else n.value[u].LoseStatus=!0;if(d.value=="SD"&&C.userInfo.balanceDraw>I.value*3){x.value=!0,n.value[u].born=!0,n.value[u].LoseStatus=!1,T.value.channel=n.value[u].channel,T.value.taskId=n.value[u].taskId,$("no");return}else n.value[u].LoseStatus=!0}}}else if(localStorage.getItem("historyGenerateDatas")){const u=JSON.parse(localStorage.getItem("historyGenerateDatas"));n.value.forEach(g=>{u.id==g.id&&(g=u,g.born=!0,g.LoseStatus=!1)})}else for(const u in n.value)n.value[u].imageUrls||(n.value[u].born=!1,n.value[u].LoseStatus=!0)}).catch(s=>{console.log(s)})},N=r(0);r(!1);const pe=r(!1),$=a=>{Nl(T.value).then(t=>{if(N.value++,ce.value=!1,ie.value=t.progress,ke.value="",n.value.length>=1){for(const s in n.value)t.id==n.value[s].id&&!n.value[s].LoseStatus?n.value[s].progress!="100%"&&(n.value[s]=t,pe.value=!1):pe.value=!0;pe.value&&(t.id==n.value[0].id?n.value[0]=t:n.value.unshift(t))}else n.value.unshift(t);if(window.dispatchEvent(new CustomEvent("onProgress",{detail:{data:ie.value,value:t}})),ie.value!=="100%"){if(C.timer=setTimeout($,8e3),n.value.length>0)for(const s in n.value)t.id==n.value[s].id&&(console.log("key不等于100%，继续发送请求"),n.value[s].born=!0,n.value[s].LoseStatus=!1);x.value=!0,localStorage.setItem("historyGenerateDatas",JSON.stringify(t))}else{if(n.value.length>0){for(const s in n.value)n.value[s].imageUrls&&(n.value[s].imageUrlList=n.value[s].imageUrls.split(","));for(const s in n.value)if(t.id==n.value[s].id){n.value[s].born=!1;break}}x.value=!1,N.value==1?L():L("no"),a=="no"&&L("no")}}).catch(t=>{for(const s in n.value)n.value[s].taskId==T.value.taskId&&(n.value[s].LoseStatus=!0,n.value[s].born=!1);localStorage.setItem("historyGenerateData",JSON.stringify(n.value.slice(0,5))),ce.value=!0})},nl=(a,t)=>{oe.value=t,a=="SD"?d.value="SD":a=="MJ"&&(d.value="MJ"),k.value=[],Ee()},il=a=>(console.log("progress",a.progress),a.progress?a.progress.split("%")[0]:0),V=r(),E=r(),rl=()=>{if(d.value=="MJ"&&C.userInfo.balanceDraw<D.value*2){z({type:"success",message:"请联系管理员"});return}else if(d.value=="SD"&&C.userInfo.balanceDraw<I.value*3){z({type:"success",message:"请联系管理员"});return}else{ul();return}},ul=async()=>{if(N.value=0,k.value={channel:d,prompt:ke,batchSize:D,action:Qe,sizeRatio:M,quality:ne,styleName:X},d.value=="SD"?(k.value.prompt=V.value,k.value.negativePrompt=he.value,k.value.model=Z.value,k.value.samplerIndex=ee.value,k.value.restoreFaces=_e.value,k.value.seed=Y.value||-1,k.value.batchSize=I.value):k.value.prompt=E.value,d.value=="MJ"&&!E.value)return z({message:"提示词不能为空",type:"warning"});if(d.value=="SD"&&!V.value)return z({message:"提示词不能为空",type:"warning"});if(x.value&&!ce.value){z({message:"正在生成中...",type:"warning"});return}J.value||(J.value=!0,k.value.useTokens=d.value=="MJ"?D.value*2:I.value*3,d.value=="SD"&&n.value.unshift({...k.value,progress:"0%",born:!0}),await Fe(k.value).then(a=>{C.getUser(),x.value=!0,Q.value=a.taskId,d.value=="MJ"?$():(n.value.shift(),L(),x.value=!1),J.value=!1}).catch(a=>{J.value=!1,x.value=!1}))},cl=async(a,t)=>{if(d.value=="MJ"&&C.userInfo.balanceDraw<D.value*2){z({type:"success",message:"请联系管理员"});return}if(d.value=="SD"&&C.userInfo.balanceDraw<I.value*3){z({type:"success",message:"请联系管理员"});return}N.value=0,d.value=a.channel;const s={channel:a.channel,prompt:a.prompt,batchSize:a.batchSize,sizeRatio:a.scale,quality:a.quality,action:"generate",styleName:a.styleName};a.channel=="SD"&&(s.negativePrompt=a.negativePrompt,s.model=a.model,s.samplerIndex=a.samplerIndex,s.restoreFaces=a.restoreFaces,s.seed=a.seed,s.batchSize=a.batchSize),s.useTokens=d.value=="MJ"?D.value*2:I.value*3,d.value=="SD"&&n.value.unshift({...s,progress:"0%",born:!0}),await Fe(s).then(u=>{x.value=!0,Q.value=u.taskId,d.value=="MJ"?$():(n.value.shift(),L(),x.value=!1)}),n.value.splice(t,1),localStorage.setItem("historyGenerateData",JSON.stringify(n.value))},Le=r(),dl=a=>{ue.value=!0,Le.value=a.id},vl=(a,t)=>{var s=new Image;s.setAttribute("crossOrigin","anonymous"),s.onload=function(){var u=document.createElement("canvas");u.width=s.width,u.height=s.height;var g=u.getContext("2d");g.drawImage(s,0,0,s.width,s.height);var te=u.toDataURL("image/png"),B=document.createElement("a"),ae=new MouseEvent("click");B.download=t||"photo",B.href=te,B.dispatchEvent(ae)},s.src=a},Ue=a=>{const t=new Date().getTime();vl(a,`${t}`)},pl=(a,t)=>{if(t.channel=="MJ"){const u=t.imageUrls.split(",");for(var s=0;s<u.length;s++)Ue(u[s])}else if(t.imageUrls){const u=t.imageUrls.split(",");for(var s=0;s<u.length;s++)Ue(u[s])}},{toClipboard:_l}=ht(),ml=async a=>{try{await _l(a.prompt),z({type:"success",message:"复制成功!"})}catch(t){console.error(t),z({type:"error",message:"复制失败，请手动复制"})}};r(!0);const _e=r(!0),R=r(!0);r(!1);const U=r(!1),I=r(1);r(7),r(1),r(0),r(0),r(0);const Y=r(""),Z=r(""),me=r([]),ee=r(),fl=()=>{$l({}).then(a=>{console.log(a),me.value=a,ee.value=me.value[0].name})},fe=r([]);(async()=>{await Bl({}).then(a=>{fe.value=a.filter(t=>t.name!="暂无"),M.value=a[0].ratioWidth+":"+a[0].ratioHeight})})(),r(""),r("");const le=r(["1"]);r(["1"]);const Me=a=>{console.log(a)},hl=a=>{Gl({id:a}).then(t=>{const s=t;d.value=s.channel,oe.value=s.channel=="MJ"?0:1,gl(s.drawWorkId,t)}).catch(t=>{console.log(t)})},gl=(a,t)=>{d.value=="SD"&&n.value.unshift({createTime:t.createTime,channel:t.channel,batchSize:t.batchSize,progress:"0%",born:!0}),ql({},a).then(s=>{x.value=!0,Q.value=s.taskId,d.value=="MJ"?$():(n.value.shift(),L(),x.value=!1)})};Ml(()=>{C.getUser(),L(),N.value=0,fl(),bl(),ve(),se.query&&se.query.id&&hl(se.query.id),window.addEventListener("onProgress",function(a){if(x.value=a.detail.data!="100%",a.detail.data=="100%"){for(const t in n.value)if(a.detail.value.id==n.value[t].id){n.value[t]=a.detail.value,n.value[t].born=!1,n.value[t].LoseStatus=!1;const s=r([]);localStorage.setItem("historyGenerateData",JSON.stringify(s.value)),console.log("监听进来了",localStorage.getItem("historyGenerateData"));break}}else for(const t in n.value)if(a.detail.value.id==n.value[t].id){n.value[t]=a.detail.value,n.value[t].born=!0,n.value[t].LoseStatus=!1;const s=r([]);localStorage.setItem("historyGenerateData",JSON.stringify(s.value)),console.log("监听进来了2",localStorage.getItem("historyGenerateData"));break}})});const he=r("");r(""),r(""),r(!1);const Je=(a,t)=>{if(console.log(a),re.value=a,ue.value=a,t){for(const s in n.value)t==n.value[s].id&&(n.value[s].isContribute=!0);localStorage.setItem("historyGenerateData",JSON.stringify(n.value))}},Te=r(),yl=a=>{re.value=!0,Te.value=a.id},ge=r([]),bl=()=>{Jl({}).then(a=>{ge.value=a,Z.value=ge.value[0].modelName})},wl=()=>{R.value&&(Y.value="")};return r(!1),(a,t)=>{const s=jl,u=Ol,g=Al,te=Kl,B=Tl("StarFilled"),ae=Ql,W=Yl,H=Xl,ye=Zl,Ne=et,$e=lt,Be=Fl,Ge=tt,xl=at,qe=st,je=ot,P=nt,kl=it,Sl=rt,Oe=ut,Cl=ct,Vl=dt;return c(),_("div",null,[o(Vl,{name:"default"},{default:i(()=>[e("div",St,[e("div",Ct,[o(je,null,{default:i(()=>[e("p",Vt,[e("div",Et,[e("ul",null,[(c(!0),_(y,null,b(ll.value,(l,v)=>(c(),_("li",{key:v,onClick:m=>nl(l,v),class:A(oe.value==v?"activeClass":"")},h(l),11,Dt))),128))])]),d.value=="MJ"?(c(),_("div",It,[e("div",zt,[Lt,o(p(Ae),{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=l=>E.value=l),maxlength:"1024",rows:7,clearable:!0,"show-word-limit":!1,customStyle:{paddingBottom:"24px",marginTop:"15px"},placeholder:"输入英文描述词，生成效果会更好；描述词越详细，生成的图片效果更加真实哦～"},{"length-suffix":i(()=>{var l,v;return[e("div",Ut,[o(p(Ke),{modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=m=>E.value=m)},{trigger:i(()=>[o(s,{type:"primary",link:!0,class:"mb-[1px] ml-[10px]"},{default:i(()=>[w(" 关键词推荐 ")]),_:1})]),_:1},8,["modelValue"]),((v=(l=p(xe))==null?void 0:l.getDrawConfig)==null?void 0:v.translate_type)==2?(c(),S(s,{key:0,type:"default",link:!0,class:"ml-[10px]",icon:p(Re),loading:a.isTranslate,onClick:t[1]||(t[1]=m=>Ie("mj"))},{default:i(()=>[w(" 翻译成英文 ")]),_:1},8,["icon","loading"])):G("",!0),o(s,{type:"default",link:!0,class:"ml-[10px]",icon:p(We),onClick:t[2]||(t[2]=m=>E.value="")},{default:i(()=>[w(" 清空 ")]),_:1},8,["icon"])])]}),_:1},8,["modelValue"]),e("div",Mt,[e("div",{class:"flex items-center hover:text-primary select-none",style:{color:"#8e8e8e"},onClick:ve},[o(u,{size:"16",color:"inherit",style:{"vertical-align":"middle"}},{default:i(()=>[o(p(He))]),_:1}),Jt]),e("div",Tt,[(c(!0),_(y,null,b(de.value,(l,v)=>(c(),S(g,{class:"ml-[10px]",effect:"light",key:v,content:l.prompt,placement:"bottom"},{default:i(()=>[e("span",{class:"ml-[10px]",style:{"max-width":"100px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},onClick:m=>ze(l.prompt,"mj")},h(l.prompt),9,Nt)]),_:2},1032,["content"]))),128))])])]),e("div",$t,[e("div",Bt,[Gt,o(te,{"body-class":"selectStyle",shadow:"hover",onClick:t[4]||(t[4]=l=>U.value=!0)},{default:i(()=>[e("img",{src:O.value,alt:""},null,8,qt),e("div",jt,[e("p",null,h(F.value),1),Ot])]),_:1}),o(ae,{modelValue:U.value,"onUpdate:modelValue":t[5]||(t[5]=l=>U.value=l),title:"创作风格",width:"30%"},{default:i(()=>[e("div",Ft,[Rt,e("div",Wt,[e("div",Ht,[(c(!0),_(y,null,b(j.value,(l,v)=>(c(),_("div",{class:"img",key:v,onClick:m=>De(l)},[e("img",{src:l.imgUrl,alt:"",style:{height:"112px","object-fit":"cover"}},null,8,At),e("div",null,[e("div",null,[e("p",Kt,h(l.name),1),Qt]),o(u,null,{default:i(()=>[o(B)]),_:1})])],8,Pt))),128))])])])]),_:1},8,["modelValue"])])]),e("div",Xt,[o($e,{modelValue:le.value,"onUpdate:modelValue":t[8]||(t[8]=l=>le.value=l),onHandleChange:Me},{default:i(()=>[o(Ne,{class:"title",title:"参数设定",name:"1"},{default:i(()=>[e("div",Yt,[Zt,e("div",null,[e("div",ea,[e("div",la,[o(g,{class:"box-item",effect:"dark",content:"选择需要的比例与尺寸，尺寸越大耗时越久。",placement:"top-start"},{default:i(()=>[o(s,null,{default:i(()=>[o(u,null,{default:i(()=>[o(p(q))]),_:1})]),_:1})]),_:1})])])])]),e("div",ta,[o(H,{modelValue:M.value,"onUpdate:modelValue":t[6]||(t[6]=l=>M.value=l),placeholder:"3:4"},{default:i(()=>[(c(!0),_(y,null,b(fe.value,l=>(c(),S(W,{key:l.ratioWidth+":"+l.ratioHeight,label:l.name+""+l.ratioWidth+":"+l.ratioHeight,value:l.ratioWidth+":"+l.ratioHeight},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o(ye),aa,e("div",sa,[o(H,{modelValue:ne.value,"onUpdate:modelValue":t[7]||(t[7]=l=>ne.value=l),class:"m-2"},{default:i(()=>[(c(!0),_(y,null,b(Ye.value,l=>(c(),S(W,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o(ye),e("div",oa,[na,e("div",null,[e("div",ia,[e("div",ra,[o(g,{class:"box-item",effect:"dark",content:"生成张数越多，耗时越久。",placement:"top-start"},{default:i(()=>[o(s,null,{default:i(()=>[o(u,null,{default:i(()=>[o(p(q))]),_:1})]),_:1})]),_:1})])])])]),e("div",ua,[(c(!0),_(y,null,b(Ze.value,(l,v)=>(c(),_("div",{class:"flex",key:v},[e("div",{class:A([Se.value==v?"slider-active":"","slider-item"]),onClick:m=>tl(l,v)},h(l)+"张",11,ca)]))),128))])]),_:1})]),_:1},8,["modelValue"])])])):G("",!0),d.value=="SD"?(c(),_("div",da,[e("div",va,[pa,o(p(Ae),{modelValue:V.value,"onUpdate:modelValue":t[12]||(t[12]=l=>V.value=l),maxlength:"1024",rows:7,clearable:!0,"show-word-limit":!1,customStyle:{paddingBottom:"24px",marginTop:"15px"},placeholder:"输入英文描述词，生成效果会更好；描述词越详细，生成的图片效果更加真实哦～"},{"length-suffix":i(()=>{var l,v;return[e("div",_a,[o(p(Ke),{modelValue:V.value,"onUpdate:modelValue":t[9]||(t[9]=m=>V.value=m)},{trigger:i(()=>[o(s,{type:"primary",link:!0,class:"mb-[1px] ml-[10px]"},{default:i(()=>[w(" 关键词推荐 ")]),_:1})]),_:1},8,["modelValue"]),((v=(l=p(xe))==null?void 0:l.getDrawConfig)==null?void 0:v.translate_type)==2?(c(),S(s,{key:0,type:"default",link:!0,class:"ml-[10px]",icon:p(Re),loading:a.isTranslate,onClick:t[10]||(t[10]=m=>Ie("sd"))},{default:i(()=>[w(" 翻译成英文 ")]),_:1},8,["icon","loading"])):G("",!0),o(s,{type:"default",link:!0,class:"ml-[10px]",icon:p(We),onClick:t[11]||(t[11]=m=>V.value="")},{default:i(()=>[w(" 清空 ")]),_:1},8,["icon"])])]}),_:1},8,["modelValue"]),e("div",ma,[e("div",{class:"flex items-center hover:text-primary select-none",style:{color:"#8e8e8e"},onClick:ve},[o(u,{size:"16",color:"inherit",style:{"vertical-align":"middle"}},{default:i(()=>[o(p(He))]),_:1}),fa]),e("div",ha,[(c(!0),_(y,null,b(de.value,(l,v)=>(c(),S(g,{class:"ml-[10px]",effect:"light",key:v,content:l.prompt,placement:"bottom"},{default:i(()=>[e("span",{class:"ml-[10px]",style:{"max-width":"100px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},onClick:m=>ze(l.prompt,"sd")},h(l.prompt),9,ga)]),_:2},1032,["content"]))),128))])]),ya,o(Be,{class:"textarea",modelValue:he.value,"onUpdate:modelValue":t[13]||(t[13]=l=>he.value=l),maxlength:"800",placeholder:"请输入你的创意","show-word-limit":"",type:"textarea",style:{"border-radius":"10px"}},null,8,["modelValue"])]),e("div",ba,[e("div",wa,[xa,o(Ge,{style:{margin:"0 0 15px 0"},gutter:12},{default:i(()=>[o(te,{"body-class":"selectStyle",shadow:"hover",onClick:t[14]||(t[14]=l=>U.value=!0)},{default:i(()=>[e("img",{src:O.value,alt:""},null,8,ka),e("div",Sa,[e("p",null,h(F.value),1),Ca])]),_:1}),o(ae,{modelValue:U.value,"onUpdate:modelValue":t[15]||(t[15]=l=>U.value=l),title:"创作风格"},{default:i(()=>[e("div",Va,[Ea,e("div",Da,[e("div",Ia,[(c(!0),_(y,null,b(j.value,(l,v)=>(c(),_("div",{class:"img",key:v,onClick:m=>De(l)},[e("img",{src:l.imgUrl,alt:"",style:{height:"112px","object-fit":"cover"}},null,8,La),e("div",null,[e("div",null,[e("p",Ua,h(l.name),1),Ma]),o(u,null,{default:i(()=>[o(B)]),_:1})])],8,za))),128))])])])]),_:1},8,["modelValue"])]),_:1})])]),e("div",Ja,[Ta,o(Ge,{class:"mb-4"},{default:i(()=>[e("div",Na,[o(H,{modelValue:Z.value,"onUpdate:modelValue":t[16]||(t[16]=l=>Z.value=l),class:"s-1"},{default:i(()=>[(c(!0),_(y,null,b(ge.value,l=>(c(),S(W,{key:l,label:l.modelName,value:l.modelName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),e("div",$a,[o($e,{modelValue:le.value,"onUpdate:modelValue":t[22]||(t[22]=l=>le.value=l),onHandleChange:Me},{default:i(()=>[o(Ne,{class:"title",title:"参数设定",name:"1"},{default:i(()=>[e("div",Ba,[Ga,e("div",null,[e("div",qa,[e("div",ja,[o(g,{class:"box-item",effect:"dark",content:"选择需要的比例与尺寸，尺寸越大耗时越久。",placement:"top-start"},{default:i(()=>[o(s,null,{default:i(()=>[o(u,null,{default:i(()=>[o(p(q))]),_:1})]),_:1})]),_:1})])])])]),e("div",Oa,[o(H,{modelValue:M.value,"onUpdate:modelValue":t[17]||(t[17]=l=>M.value=l),class:"s-1"},{default:i(()=>[(c(!0),_(y,null,b(fe.value,l=>(c(),S(W,{key:l.ratioWidth+":"+l.ratioHeight,label:l.name+""+l.ratioWidth+":"+l.ratioHeight,value:l.ratioWidth+":"+l.ratioHeight},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o(ye),e("div",Fa,[Ra,e("div",Wa,[e("div",Ha,[o(g,{class:"box-item",effect:"dark",content:"生成张数越多，耗时越久。",placement:"top-start"},{default:i(()=>[o(s,null,{default:i(()=>[o(u,null,{default:i(()=>[o(p(q))]),_:1})]),_:1})]),_:1})])])]),e("div",Pa,[(c(!0),_(y,null,b(el.value,(l,v)=>(c(),_("div",{class:"flex",key:v},[e("div",{class:A([Ce.value==v?"slider-active":"","slider-item"]),onClick:m=>al(l,v)},h(l)+"张",11,Aa)]))),128))]),e("div",Ka,[Qa,e("div",Xa,[e("div",Ya,[o(g,{class:"box-item",effect:"dark",content:"选择不同的采样器效果与耗时会有所不同",placement:"top-start"},{default:i(()=>[o(s,null,{default:i(()=>[o(u,null,{default:i(()=>[o(p(q))]),_:1})]),_:1})]),_:1})])])]),e("div",Za,[o(H,{modelValue:ee.value,"onUpdate:modelValue":t[18]||(t[18]=l=>ee.value=l),class:"s-1"},{default:i(()=>[(c(!0),_(y,null,b(me.value,l=>(c(),S(W,{key:l,label:l.name,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",es,[ls,e("div",ts,[e("div",as,[o(g,{class:"box-item",effect:"dark",content:"稳定图片风格的种子，当随机出一组觉得不错的风格图片时，可固定seed种子进行描述或其他参数的微调来达到最佳效果。",placement:"top-start"},{default:i(()=>[o(s,null,{default:i(()=>[o(u,null,{default:i(()=>[o(p(q))]),_:1})]),_:1})]),_:1})])]),e("div",null,[o(xl,{modelValue:R.value,"onUpdate:modelValue":t[19]||(t[19]=l=>R.value=l),label:"随机",onChange:wl,size:"large"},null,8,["modelValue"])])]),e("div",ss,[o(Be,{modelValue:Y.value,"onUpdate:modelValue":t[20]||(t[20]=l=>Y.value=l),placeholder:R.value?"随机中":"请输入",clearable:"",disabled:R.value},null,8,["modelValue","placeholder","disabled"])]),e("div",os,[ns,e("div",null,[o(p(vt),{modelValue:_e.value,"onUpdate:modelValue":t[21]||(t[21]=l=>_e.value=l)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])])):G("",!0)]),e("div",is,[e("div",rs,[e("div",us,"消耗"+h(d.value=="MJ"?D.value*2:I.value*3)+"条绘画次数",1),e("div",null,[o(qe,{placement:"top-end",title:"明细",width:200,trigger:"hover"},{reference:i(()=>[e("div",vs,[w("明细 "),o(u,{size:12},{default:i(()=>[o(p(Pe))]),_:1})])]),default:i(()=>[e("div",cs,[e("div",ds,[e("span",null,"文生图*"+h(d.value=="MJ"?D.value:I.value),1),e("span",null,h(d.value=="MJ"?D.value*2:I.value*3)+"条绘画次数",1)])])]),_:1})])]),e("div",ps,[o(s,{type:"primary",onClick:rl,disabled:J.value},{default:i(()=>[w(h(J.value?"请求中...":"立即生成"),1)]),_:1},8,["disabled"])])])]),_:1})]),e("div",_s,[o(je,{height:"82vh"},{default:i(()=>[ms,e("div",fs,[n.value.length>0?(c(!0),_(y,{key:0},b(n.value,(l,v)=>(c(),_("div",{class:"showGenerateBox",key:v},[e("div",hs,[e("div",gs,[o(qe,{placement:"top-start",width:150,trigger:"hover",content:"复制文本到‘描述’中"},{reference:i(()=>[o(s,{icon:p(Rl),onClick:m=>ml(l),size:"small",circle:"",style:{width:"1em",height:"1em","margin-right":"8px",cursor:"pointer"}},null,8,["icon","onClick"])]),_:2},1024),e("span",ys,h(l.prompt),1)]),e("div",bs,[e("span",null,h(l.createTime),1),e("span",null,"绘画渠道: "+h(l.channel?l.channel:"无"),1),ws,l.LoseStatus?(c(),S(s,{key:0,onClick:m=>Ve(l.id),style:{"margin-right":"8px"}},{default:i(()=>[w("删除")]),_:2},1032,["onClick"])):G("",!0),o(Sl,{trigger:"click"},{dropdown:i(()=>[o(kl,null,{default:i(()=>[o(P,{onClick:m=>pl(m,l)},{default:i(()=>[w("下载")]),_:2},1032,["onClick"]),o(P,{onClick:m=>cl(l,v)},{default:i(()=>[w("重绘")]),_:2},1032,["onClick"]),o(P,{onClick:m=>Ve(l.id)},{default:i(()=>[w("删除")]),_:2},1032,["onClick"]),o(P,{disabled:l.isContribute,onClick:m=>dl(l)},{default:i(()=>[w("投稿")]),_:2},1032,["disabled","onClick"]),o(P,{onClick:m=>yl(l)},{default:i(()=>[w("详情")]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[o(s,{type:"primary",disabled:l.born},{default:i(()=>[w(" 功能选择"),o(u,{class:"el-icon--right"},{default:i(()=>[o(p(Pe))]),_:1})]),_:2},1032,["disabled"])]),_:2},1024)])]),e("div",xs,[l.progress=="100%"?(c(!0),_(y,{key:0},b(l.imageUrlList,(m,be)=>(c(),S(Oe,{style:{"border-radius":"5px",margin:"0px 5px"},src:l.imageUrlList[be]+p(C).zip,"zoom-rate":1.2,"preview-src-list":l.imageUrlList,"initial-index":be,fit:"cover","hide-on-click-modal":"true",key:be},null,8,["src","preview-src-list","initial-index"]))),128)):l.LoseStatus?(c(),S(Oe,{key:1,style:{"border-radius":"5px",margin:"0px 5px"},src:p(pt),"zoom-rate":1.2,"initial-index":v,fit:"cover","hide-on-click-modal":"true"},null,8,["src","initial-index"])):l.born==!0?(c(!0),_(y,{key:2},b(l.batchSize,m=>(c(),_("div",{ref_for:!0,ref_key:"boxImg",ref:Xe,class:A([l.scale=="1:1"?"imageSize1_1":l.scale=="2:3"?"imageSize2_3":l.scale=="3:2"?"imageSize3_2":l.scale=="3:4"?"imageSize3_4":l.scale=="4:3"?"imageSize4_3":l.scale=="9:16"?"imageSize9_16":l.scale=="16:9"?"imageSize16_9":" ","showGenerateBoxBottomLoad"])},[o(Cl,{type:"circle","striped-flow":"",status:l.LoseStatus,color:l.LoseStatus?"red":"",percentage:il(l)},null,8,["status","color","percentage"])],2))),256)):G("",!0)])]))),128)):(c(),S(p(_t),{key:1}))])]),_:1})])])]),_:1}),o(p(ft),{dialogTableVisible:re.value,id:Te.value,onChangeStatus:Je},null,8,["dialogTableVisible","id"]),o(p(gt),{contributeVisible:ue.value,id:Le.value,onChangeOff:Je},null,8,["contributeVisible","id"])])}}});const xo=kt(ks,[["__scopeId","data-v-56deda0e"]]);export{xo as default};
