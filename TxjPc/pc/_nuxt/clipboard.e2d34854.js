import{v as he,l as be,b8 as ye,r as p,g as Se,au as ke,o as a,c as s,a as u,b as o,w as i,h as r,F as z,i as I,t as V,d as v,m as b,q as f,ab as B,bJ as Ce,aO as we,a6 as xe,k as Ae,D as Le,a4 as Ne,bK as Ee,n as Z,bL as ze,bM as Ie,j as ee,as as Ve,p as Be,e as Te}from"./entry.35d4c246.js";import{E as Ue,a as $e}from"./el-tabs.de01d035.js";import{b as He,a as Me}from"./el-radio-group.3e93ee2b.js";import{E as Re}from"./index.6f30e63e.js";/* empty css                *//* empty css                 *//* empty css                  *//* empty css                   */import{p as De,b as Fe}from"./index.1954cdf9.js";import{e as We,_ as W}from"./errorImg.685080e1.js";import{g as je,a as qe,b as Oe}from"./drawing.998ab448.js";import{h as Pe}from"./index.89951fb8.js";import{_ as Ge}from"./_plugin-vue_export-helper.c27b6911.js";import"./strings.b7c92e5e.js";import"./index.341c05ee.js";import"./index.d44e751f.js";import"./dropdown.72fdcde9.js";import"./throttle.203d98ad.js";import"./debounce.7d5a41e6.js";import"./el-col.bdd6d635.js";import"./el-row.5cfa1389.js";import"./index.e8cc7217.js";import"./index.93e13010.js";import"./refs.179b14af.js";/* empty css                  *//* empty css                  */import"./typeLIst.1ff2b2b6.js";import"./_commonjsHelpers.87174ba5.js";import"./el-form.c9be7d71.js";import"./castArray.048c84c6.js";import"./_baseClone.43deedb0.js";import"./_getTag.0a62c0db.js";import"./empty_news.49a3869c.js";import"./index.f1996257.js";const j=k=>(Be("data-v-0e8a60a1"),k=k(),Te(),k),Je={class:"Album"},Ke=["onClick"],Qe={class:"quantity"},Xe={style:{display:"flex"}},Ye={key:0},Ze=j(()=>u("span",null,"批量操作",-1)),et={key:1},tt=j(()=>u("span",null,"取消",-1)),lt={key:0,style:{display:"flex","align-items":"center"}},at={style:{"margin-right":"30px"}},ot={class:"WaterfallFlow"},st=["onClick"],it=["onClick"],nt={key:1,class:"img-length"},ct={key:2,class:"img-length"},rt=["onClick"],ut={key:0,t:"1696908766641",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6646",width:"20",height:"20"},pt=j(()=>u("path",{d:"M63.222927 512c0 0 231.767598 189.584869 254.790964 350.823134 0 0 303.906591-497.491565 641.581264-542.003338 0 0-102.837156-74.943876-69.070098-193.395662 0 0-187.255825 18.684548-540.279067 566.637388L184.79375 413.212066 63.222927 512z","p-id":"6647",fill:"#ffffff"},null,-1)),vt=[pt],dt=["src"],gt=["src"],_t={class:"WaterfallFlow"},mt=["onClick"],ft=["src"],ht={class:"WaterfallFlow"},bt=["onClick"],yt=["src"],St=he({__name:"clipboard",props:{tabs:{type:String}},setup(k){const te=k,T=be(),{tabs:C}=ye(te),U=p(!1),$=p(!1),A=p([]),q=p(0),y=p([]),w=p([]),d=Se({list:[]}),L=p(""),O=p("works"),n=p({pageNo:1,pageSize:15,total:0}),P=p(!1);ke(()=>{G(),S()});const le=(e,l)=>{y.value=[],w.value=[],d.list=[],n.value.pageNo=1,console.log(e),e.props.name=="myCollect"?(H(),L.value="gallery"):e.props.name=="works"?(L.value="",S()):e.props.name=="contribute"&&(L.value="",D())},G=()=>{je({}).then(e=>{A.value=e})},H=()=>{let e={pageNo:n.value.pageNo,pageSize:n.value.pageSize,workType:0};Pe(e).then(l=>{n.value.total=l.count,l.lists&&l.lists.forEach(c=>{y.value.push(c)})})},ae=e=>{console.log(e),$.value=e,y.value=[],H()},M=p(),R=(e,l)=>{console.log(l),e.imageUrls&&($.value=!0,l=="contribute"?M.value=e.drawRecordsId:M.value=e.id)},J=p(),D=()=>{let e={pageNo:n.value.pageNo,pageSize:n.value.pageSize};N.value!=3&&(e.approveStatus=N.value),Ce(e).then(l=>{n.value.total=l.count,J.value=l.lists,l.lists.forEach(c=>{w.value.push(c)})})},S=e=>{let l={pageNo:n.value.pageNo,pageSize:n.value.pageSize,albumCategoryId:e||0};qe(l).then(c=>{if(n.value.total=c.count,c.lists)for(let m in c.lists)d.list.push(c.lists[m])})},N=p(3),oe=()=>{w.value=[],D()},se=e=>{e.target.scrollTop>=e.target.scrollHeight-10-e.target.clientHeight&&n.value.total>d.list.length&&(n.value.pageNo++,S())},ie=e=>{e.target.scrollTop>=e.target.scrollHeight-e.target.clientHeight&&J.value.length<n.value.total&&(n.value.pageNo++,D())},ne=e=>{e.target.scrollTop>=e.target.scrollHeight-e.target.clientHeight&&y.value.length<n.value.total&&(n.value.pageNo++,H())},ce=e=>{console.log(11111111),U.value=e},re=(e,l)=>{q.value=e,d.list=[],S(l.id)},K=e=>{P.value=e,U.value=!0},Q=e=>{e&&G()},X=e=>{we.confirm("是否删除此作品内所有图片","确认删除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{Y(e?[e]:_.value)})},Y=async e=>{let l=[];for(let c in e)l.push(e[c]);if(!l.length){xe.msgError("请选择需要删除的图片");return}try{await Oe(l).then(c=>{Ae({type:"success",message:"删除成功"})}),d.list=[],n.value.pageNo=1,S()}catch(c){console.log("删除失败绘画记录",c)}},ue=e=>{d.list=[],n.value.pageNo=1,S()},_=p([]),h=p(!1),pe=()=>{h.value=!h.value},ve=(e,l)=>{e.isActive=!e.isActive,e.isActive?_.value.push(e.id):_.value.pop(e.id)},de=()=>{_.value=[],d.list.forEach(e=>{e.isActive=!0,_.value.push(e.id)})},ge=()=>{d.list.forEach(e=>{e.isActive=!1,_.value=[]})};return(e,l)=>{const c=Le,m=Ne,F=Ue,E=He,_e=Me,me=Re,fe=$e;return a(),s("div",null,[u("div",{class:"contentbox",style:B({padding:r(C)=="card"?"15px":""})},[o(fe,{modelValue:O.value,"onUpdate:modelValue":l[4]||(l[4]=t=>O.value=t),type:r(C),class:"demo-tabs",onTabClick:le},{default:i(()=>[o(F,{label:"作品",name:"works"},{default:i(()=>[u("div",Je,[u("div",{onClick:l[0]||(l[0]=t=>K(!1))},[o(c,{color:"#18BFD0",size:26},{default:i(()=>[o(r(Ee))]),_:1})]),(a(!0),s(z,null,I(A.value,(t,g)=>(a(),s("ul",{key:g},[u("li",{onClick:x=>re(g,t),class:Z(q.value==g?"activeclass":"")},V(t.albumCategoryName),11,Ke)]))),128))]),u("div",Qe,[u("div",Xe,[u("div",null,"作品数量: "+V(n.value.total)+"/1000",1),u("div",{class:"batch",onClick:pe},[h.value?(a(),s("div",et,[o(c,{size:"20",style:{"vertical-align":"sub","margin-right":"5px"}},{default:i(()=>[o(r(Ie))]),_:1}),tt])):(a(),s("div",Ye,[o(c,{size:"20",style:{"vertical-align":"sub","margin-right":"5px"}},{default:i(()=>[o(r(ze))]),_:1}),Ze]))])]),h.value?(a(),s("div",lt,[u("div",at,"已选中: "+V(_.value.length)+"/100",1),o(m,{onClick:de},{default:i(()=>[v("全选")]),_:1}),_.value.length>0?(a(),b(m,{key:0,onClick:ge},{default:i(()=>[v("取消选中")]),_:1})):f("",!0),o(m,{onClick:l[1]||(l[1]=t=>K(!0))},{default:i(()=>[v("移至")]),_:1}),o(m,{onClick:l[2]||(l[2]=t=>X())},{default:i(()=>[v("删除")]),_:1})])):f("",!0)]),d.list.length>0?(a(),s("div",{key:0,style:B({maxHeight:r(C)=="card"?"75vh":"60vh",overflow:"auto"}),onScroll:se},[u("div",ot,[(a(!0),s(z,null,I(d.list,(t,g)=>(a(),s("div",{class:"items",onClick:x=>R(t),key:g},[!t.workApproveStatus||t.workApproveStatus==2?(a(),s("span",{key:0,class:"delete",onClick:ee(x=>X(t.id),["stop"])},[o(c,null,{default:i(()=>[o(r(Ve))]),_:1})],8,it)):f("",!0),!h.value&&t.imageUrls?(a(),s("span",nt,V(t.batchSize||0)+"张",1)):f("",!0),!h.value&&!t.imageUrls?(a(),s("span",ct,"生成失败")):f("",!0),h.value?(a(),s("div",{key:3,class:Z([t.isActive?"ItemActive":"","options"]),onClick:ee(x=>ve(t,g),["stop"])},[t.isActive?(a(),s("svg",ut,vt)):f("",!0)],10,rt)):f("",!0),t.imageUrlList?(a(),s("img",{key:4,src:t.imageUrlList[0]+r(T).zip,alt:""},null,8,dt)):(a(),s("img",{key:5,src:r(We),alt:""},null,8,gt))],8,st))),128))])],36)):(a(),b(r(W),{key:1}))]),_:1}),o(F,{label:"收藏",name:"myCollect"},{default:i(()=>[y.value.length>0?(a(),s("div",{key:0,style:B({maxHeight:r(C)=="card"?"75vh":"60vh",overflow:"auto"}),onScroll:ne},[u("div",_t,[(a(!0),s(z,null,I(y.value,(t,g)=>(a(),s("div",{class:"items",onClick:x=>R(t),key:g},[u("img",{src:t.imageUrlList[0]+r(T).zip,alt:""},null,8,ft)],8,mt))),128))])],36)):(a(),b(r(W),{key:1}))]),_:1}),o(F,{label:"投稿",name:"contribute"},{default:i(()=>[o(_e,{modelValue:N.value,"onUpdate:modelValue":l[3]||(l[3]=t=>N.value=t),onChange:oe},{default:i(()=>[o(E,{label:3},{default:i(()=>[v("全部")]),_:1}),o(E,{label:0},{default:i(()=>[v("审批中")]),_:1}),o(E,{label:1},{default:i(()=>[v("已审批")]),_:1}),o(E,{label:2},{default:i(()=>[v("已驳回")]),_:1})]),_:1},8,["modelValue"]),w.value.length>0?(a(),s("div",{key:0,style:B({maxHeight:r(C)=="card"?"75vh":"60vh",overflow:"auto"}),onScroll:ie},[u("div",ht,[(a(!0),s(z,null,I(w.value,(t,g)=>(a(),s("div",{class:"items",onClick:x=>R(t,"contribute"),key:g},[o(me,{placement:"top-start",width:"200",trigger:"hover",content:t.rejectReason,disabled:t.approveStatus!=2},{reference:i(()=>[t.approveStatus==0?(a(),b(m,{key:0,class:"examineStatus"},{default:i(()=>[v("审批中")]),_:1})):t.approveStatus==1?(a(),b(m,{key:1,class:"examineStatus"},{default:i(()=>[v("已审批")]),_:1})):t.approveStatus==2?(a(),b(m,{key:2,class:"examineStatus"},{default:i(()=>[v("已驳回")]),_:1})):f("",!0)]),_:2},1032,["content","disabled"]),u("img",{src:t.imageUrlList[0]+r(T).zip,alt:""},null,8,yt)],8,bt))),128))])],36)):(a(),b(r(W),{key:1}))]),_:1})]),_:1},8,["modelValue","type"])],4),o(r(De),{dialogTableVisible:$.value,id:M.value,type:L.value,onChangeStatus:ae,AlbumList:A.value,onInvoke:Q,onSuccessfulSubmission:ue},null,8,["dialogTableVisible","id","type","AlbumList"]),o(r(Fe),{albumVisible:U.value,AlbumList:A.value,ismove:P.value,onInvoke:Q,paintingId:_.value,onChangeStatusMove:ce},null,8,["albumVisible","AlbumList","ismove","paintingId"])])}}});const ll=Ge(St,[["__scopeId","data-v-0e8a60a1"]]);export{ll as default};
