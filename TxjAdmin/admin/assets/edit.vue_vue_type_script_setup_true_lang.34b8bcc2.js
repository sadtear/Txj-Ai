import{D as S,F as R,C as U,B as h,t as L,G as M}from"./element-plus.28f30ed2.js";import{a as q,e as N,g as O,b as j}from"./ai_key.72a95a08.js";import{p as G}from"./index.1d239a72.js";import{f as T}from"./index.93d1c242.js";import{d as z,s as B,r as y,o as p,c as P,V as u,M as s,u as l,U as H,aa as J,L as _,R as k}from"./@vue.cb90fff3.js";const Q={class:"edit-popup"},ae=z({__name:"edit",emits:["success"],setup(W,{expose:A,emit:K}){const v=B(),m=B(),f=y(""),F=y([]),e=y({id:"",type:"",appid:"",secret:"",aiKey:"",apikey:"",status:1}),x={apikey:[{required:!0,message:"\u8BF7\u8F93\u5165APIKey",trigger:["blur"]}],appid:[{required:!0,message:"\u8BF7\u8F93\u5165APPID"}],secret:[{required:!0,message:"\u8BF7\u8F93\u5165APISecret"}]},g=async()=>{var o,a;try{await((o=v.value)==null?void 0:o.validate()),e.value.id==""?await q(e.value):e.value.id!=""&&await N(e.value),T.msgSuccess("\u64CD\u4F5C\u6210\u529F"),K("success"),(a=m.value)==null||a.close()}catch(n){return n}},I=async(o,a,n)=>{var d;if(a=="add")e.value={id:"",type:o,aiKey:"",key:"",status:1},f.value="\u65B0\u589E\u5BC6\u94A5";else if(a=="edit"){const r=await O({id:n.id});Object.keys(e.value).map(i=>{var c;e.value[i]=(c=r[i])!=null?c:0}),e.value.type=o,f.value="\u7F16\u8F91\u5BC6\u94A5"}(d=m.value)==null||d.open(),C(o)},C=async o=>{try{const a=await j({type:o});F.value=a}catch(a){console.log(a)}};return A({open:I}),(o,a)=>{const n=S,d=R,r=U,i=h,c=L,E=M;return p(),P("div",Q,[u(G,{ref_key:"popupRef",ref:m,title:l(f),async:!0,width:"550px",onConfirm:g},{default:s(()=>[u(E,{class:"ls-form",ref_key:"formRef",ref:v,rules:x,model:l(e),"label-width":"90px"},{default:s(()=>{var V,b,w;return[u(r,{label:"\u63A5\u53E3\u7C7B\u578B"},{default:s(()=>[u(d,{class:"w-[330px]",modelValue:l(e).aiKey,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).aiKey=t)},{default:s(()=>[(p(!0),P(H,null,J(l(F),(t,D)=>(p(),_(n,{key:D,label:t.name,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(V=l(e).aiKey)!=null&&V.includes("xunfei")?(p(),_(r,{key:0,label:"APPID",prop:"appid"},{default:s(()=>[u(i,{class:"w-[330px]",modelValue:l(e).appid,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).appid=t),placeholder:"\u8BF7\u8F93\u5165APPID",clearable:""},null,8,["modelValue"])]),_:1})):k("",!0),((b=l(e).aiKey)==null?void 0:b.includes("xunfei"))||((w=l(e).aiKey)==null?void 0:w.includes("ernie_bot"))?(p(),_(r,{key:1,label:"APISecret",prop:"secret"},{default:s(()=>[u(i,{class:"w-[330px]",modelValue:l(e).secret,"onUpdate:modelValue":a[2]||(a[2]=t=>l(e).secret=t),placeholder:"\u8BF7\u8F93\u5165APISecret",clearable:""},null,8,["modelValue"])]),_:1})):k("",!0),u(r,{label:"APIKey",prop:"apikey"},{default:s(()=>[u(i,{class:"w-[330px]",modelValue:l(e).apikey,"onUpdate:modelValue":a[3]||(a[3]=t=>l(e).apikey=t),placeholder:"\u8BF7\u8F93\u5165APIKey",rows:4,type:"textarea",clearable:""},null,8,["modelValue"])]),_:1}),u(r,{label:"\u72B6\u6001"},{default:s(()=>[u(c,{modelValue:l(e).status,"onUpdate:modelValue":a[4]||(a[4]=t=>l(e).status=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]}),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ae as _};
