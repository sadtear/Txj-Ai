import{W as k,X as x,B,C as R,v as y,G as g}from"./element-plus.28f30ed2.js";import{a as h,c as I,b as U}from"./role.73ba3037.js";import{p as N}from"./index.1d239a72.js";import{f as S}from"./index.93d1c242.js";import{d as G,s as f,r as T,e as j,_ as q,o as z,c as A,V as a,M as u,u as t,S as _}from"./@vue.cb90fff3.js";const M={class:"edit-popup"},Q=G({__name:"edit",emits:["success","close"],setup(W,{expose:F,emit:p}){const i=f(),m=f(),d=T("add"),b=j(()=>d.value=="edit"?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272"),o=q({id:"",name:"",remark:"",sort:0,isDisable:0,menus:[]}),V={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}]},D=async()=>{var e,l;await((e=i.value)==null?void 0:e.validate());const s={...o,menuIds:o.menus.join()};d.value=="edit"?await h(s):await I(s),(l=m.value)==null||l.close(),S.msgSuccess("\u64CD\u4F5C\u6210\u529F"),p("success")},E=()=>{p("close")};return F({open:(s="add")=>{var e;d.value=s,(e=m.value)==null||e.open()},setFormData:async s=>{const e=await U({id:s.id});for(const l in o)e[l]!=null&&e[l]!=null&&(o[l]=e[l])}}),(s,e)=>{const l=B,r=R,w=y,c=k,v=x,C=g;return z(),A("div",M,[a(N,{ref_key:"popupRef",ref:m,title:t(b),async:!0,width:"550px",onConfirm:D,onClose:E},{default:u(()=>[a(C,{class:"ls-form",ref_key:"formRef",ref:i,rules:V,model:t(o),"label-width":"60px"},{default:u(()=>[a(r,{label:"\u540D\u79F0",prop:"name"},{default:u(()=>[a(l,{class:"ls-input",modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(o).name=n),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"\u5907\u6CE8",prop:"remark"},{default:u(()=>[a(l,{modelValue:t(o).remark,"onUpdate:modelValue":e[1]||(e[1]=n=>t(o).remark=n),type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(r,{label:"\u6392\u5E8F",prop:"sort"},{default:u(()=>[a(w,{modelValue:t(o).sort,"onUpdate:modelValue":e[2]||(e[2]=n=>t(o).sort=n)},null,8,["modelValue"])]),_:1}),a(r,{label:"\u72B6\u6001",prop:"sort"},{default:u(()=>[a(v,{modelValue:t(o).isDisable,"onUpdate:modelValue":e[3]||(e[3]=n=>t(o).isDisable=n)},{default:u(()=>[a(c,{label:0},{default:u(()=>[_("\u6B63\u5E38")]),_:1}),a(c,{label:1},{default:u(()=>[_("\u505C\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Q as _};
