import{B as q,C as A,w as j,G as z,H as G,I as H,J,P as M}from"./element-plus.28f30ed2.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang.f7bc22c4.js";import{r as D,f as T,d as Q}from"./index.93d1c242.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.41779ad2.js";import{d as R,_ as X,s as Y,r as Z,ar as ee,o as s,c as te,V as e,M as a,u as o,ab as V,S as d,a as p,O as h,L as c,R as x,T as oe,k as ae}from"./@vue.cb90fff3.js";import{u as ne}from"./usePaging.5f3fbca9.js";import{_ as ie}from"./detail.vue_vue_type_script_setup_true_lang.7d68a1cb.js";import"./lodash-es.020a3960.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.54201ba6.js";import"./@element-plus.36ce49f2.js";import"./dayjs.38099f94.js";import"./axios.db0b6952.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.265ebbd3.js";import"./vue-router.bee126d8.js";import"./pinia.66d683d1.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.d9c88729.js";import"./color.8789f62b.js";import"./clone.7ebdaffc.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e8a38282.js";import"./ms.a9ae1d6d.js";import"./vue-drag-resize.44c30f3e.js";import"./nprogress.a77a2697.js";import"./vue-clipboard3.70be7e6e.js";import"./clipboard.551ce183.js";import"./echarts.f889f12e.js";import"./zrender.ec6da783.js";import"./tslib.60310f1a.js";import"./highlight.js.9905ea4d.js";import"./@highlightjs.ae4f7a48.js";import"./index.1d239a72.js";function le(_){return D.get({url:"/ai/draw/records/list",params:_})}function re(_){return D.post({url:"/ai/draw/records/del",params:_})}const se={class:"mb-4"},ue={class:"flex items-center"},me={class:"ml-4"},de={class:"flex items-center"},pe={class:"flex justify-end mt-4"},ce=R({name:"drawRecord"}),et=R({...ce,setup(_){const i=X({type:"1",userInfo:"",keyword:"",startTime:"",endTime:""}),b=Y(),w=Z([]),I=r=>{b.value.open(r)},{pager:u,getLists:F,resetPage:g,resetParams:P}=ne({fetchFun:le,params:i}),S=r=>{w.value=r},C=async r=>{await T.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await re({ids:r}),await T.msgSuccess("\u5220\u9664\u6210\u529F"),F()};return F(),(r,n)=>{const k=q,f=A,U=W,m=j,$=z,y=G,l=H,E=Q,K=J,L=O,B=ee("perms"),N=M;return s(),te("div",null,[e(y,{class:"!border-none",shadow:"never"},{default:a(()=>[e($,{ref:"formRef",class:"mb-[-16px]",model:o(i),inline:!0},{default:a(()=>[e(f,{label:"\u7528\u6237\u4FE1\u606F"},{default:a(()=>[e(k,{class:"w-[280px]",modelValue:o(i).userInfo,"onUpdate:modelValue":n[0]||(n[0]=t=>o(i).userInfo=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID/\u7528\u6237\u6635\u79F0",clearable:"",onKeyup:V(o(g),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(f,{label:"\u5173\u952E\u8BCD"},{default:a(()=>[e(k,{class:"w-[280px]",modelValue:o(i).keyword,"onUpdate:modelValue":n[1]||(n[1]=t=>o(i).keyword=t),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",clearable:"",onKeyup:V(o(g),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(f,{label:"\u751F\u6210\u65F6\u95F4"},{default:a(()=>[e(U,{startTime:o(i).startTime,"onUpdate:startTime":n[2]||(n[2]=t=>o(i).startTime=t),endTime:o(i).endTime,"onUpdate:endTime":n[3]||(n[3]=t=>o(i).endTime=t)},null,8,["startTime","endTime"])]),_:1}),e(f,null,{default:a(()=>[e(m,{type:"primary",onClick:o(g)},{default:a(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(m,{onClick:o(P)},{default:a(()=>[d("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(y,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[p("div",se,[e(m,{type:"default",plain:!0,disabled:!o(w).length,onClick:n[4]||(n[4]=t=>C(o(w).map(v=>v.id)))},{default:a(()=>[d(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])]),h((s(),c(K,{size:"large",data:o(u).lists,onSelectionChange:S},{default:a(()=>[e(l,{type:"selection",width:"55"}),e(l,{label:"ID",prop:"id","min-width":"80"}),e(l,{label:"\u7528\u6237\u4FE1\u606F","min-width":"140"},{default:a(({row:t})=>[p("div",ue,[t.avatar?(s(),c(E,{key:0,class:"flex-none",src:t.avatar,width:48,height:48,"preview-src-list":[t.avatar],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):x("",!0),p("span",me,oe(t.nickname),1)])]),_:1}),e(l,{label:"\u751F\u6210\u65F6\u95F4",prop:"createTime","min-width":"180","show-tooltip-when-overflow":""}),e(l,{label:"\u7528\u6237\u8F93\u5165",prop:"prompt","min-width":"280"}),e(l,{label:"\u7528\u6237\u8F93\u5165\u7FFB\u8BD1",prop:"promptEn","min-width":"280"}),e(l,{label:"\u4E0A\u4F20\u56FE\u7247","min-width":"160"},{default:a(({row:t})=>[p("div",de,[t.imageBase?(s(),c(E,{key:0,class:"flex-none",src:t.imageBase,width:64,height:64,"preview-src-list":[t.imageBase],"preview-teleported":!0,fit:"contain"},null,8,["src","preview-src-list"])):x("",!0)])]),_:1}),e(l,{label:"\u7ED8\u753B\u6E20\u9053",prop:"channel","min-width":"280"}),e(l,{label:"\u64CD\u4F5C","min-width":"180",fixed:"right"},{default:a(({row:t})=>[h((s(),c(m,{type:"primary",link:"",onClick:v=>I(t.imageUrl)},{default:a(()=>[d(" \u751F\u6210\u8BE6\u60C5 ")]),_:2},1032,["onClick"])),[[B,["ai:draw:records:detail"]]]),h((s(),c(m,{type:"danger",link:"",onClick:v=>C([t.id])},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[B,["ai:draw:records:del"]]])]),_:1})]),_:1},8,["data"])),[[N,o(u).loading]]),p("div",pe,[e(L,{modelValue:o(u),"onUpdate:modelValue":n[5]||(n[5]=t=>ae(u)?u.value=t:null),onChange:o(F)},null,8,["modelValue","onChange"])])]),_:1}),e(ie,{ref_key:"drawingRef",ref:b},null,512)])}}});export{et as default};
