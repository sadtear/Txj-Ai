import{_ as Y}from"./index.7507a854.js";import{$ as ee,x as le,W as ue,X as ae,a1 as te,y as oe,H as ne,B as de,C as me,I as re,D as se,F as be,N as ie,J as pe,G as Fe,w as ce}from"./element-plus.28f30ed2.js";import{u as ge,a as _e}from"./vue-router.bee126d8.js";import{t as fe,d as Ve,a as Be,g as Ee}from"./code.dcc5f666.js";import{a as ve}from"./dict.180d0b3e.js";import{g as Ce,f as $}from"./index.93d1c242.js";import{m as Ne}from"./menu.a581b1a2.js";import{a as Te}from"./useDictOptions.e0665b3b.js";import{d as I,r as U,_ as x,s as De,o as s,c,V as l,M as u,u as a,k as ye,a as i,U as g,aa as V,L as _,S as B,R as S}from"./@vue.cb90fff3.js";import"./vue-drag-resize.44c30f3e.js";import"./lodash-es.020a3960.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.54201ba6.js";import"./@element-plus.36ce49f2.js";import"./dayjs.38099f94.js";import"./axios.db0b6952.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.265ebbd3.js";import"./pinia.66d683d1.js";import"./vue-demi.b3a9cad9.js";import"./css-color-function.d9c88729.js";import"./color.8789f62b.js";import"./clone.7ebdaffc.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e8a38282.js";import"./ms.a9ae1d6d.js";import"./nprogress.a77a2697.js";import"./vue-clipboard3.70be7e6e.js";import"./clipboard.551ce183.js";import"./echarts.f889f12e.js";import"./zrender.ec6da783.js";import"./tslib.60310f1a.js";import"./highlight.js.9905ea4d.js";import"./@highlightjs.ae4f7a48.js";const Ae={class:"code-edit"},Ue={class:"w-80"},ke={class:"w-80"},he={class:"w-80"},we={class:"w-80"},Pe={class:"w-80"},qe={class:"w-80"},Re=i("div",{class:"form-tips"},"\u751F\u6210\u6587\u4EF6\u6240\u5728\u6A21\u5757\u540D",-1),$e={class:"w-80"},xe=i("div",{class:"form-tips"},"\u538B\u7E2E\u5305\u4E0B\u8F7D\u65B9\u5F0F\u6682\u4E0D\u652F\u6301\u81EA\u52A8\u6784\u5EFA\u83DC\u5355\u6743\u9650",-1),Se=i("div",{class:"form-tips"}," \u81EA\u52A8\u6784\u5EFA\uFF1A\u81EA\u52A8\u6267\u884C\u751F\u6210\u83DC\u5355sql\u3002 \u624B\u52A8\u6DFB\u52A0\uFF1A\u81EA\u884C\u6DFB\u52A0\u83DC\u5355 ",-1),Ie={class:"w-80"},Le={class:"w-80"},je=I({name:"tableEdit"}),Ul=I({...je,setup(Oe){let k;(r=>{r.CRUD="crud",r.TREE="tree"})(k||(k={}));let h;(r=>{r[r.ZIP=0]="ZIP",r[r.CUSTOM_PATH=1]="CUSTOM_PATH"})(h||(h={}));const L=ge(),j=_e(),{removeTab:O}=Ce(),T=U("column"),t=x({base:{id:"",tableName:"",tableComment:"",entityName:"",authorName:"",remarks:""},column:[],gen:{functionName:"",genPath:"",genTpl:"",genType:0,moduleName:"",subTableFk:"",subTableName:"",subTableFr:"",treeParent:"",treePrimary:"",treeName:"",menuName:"",menuStatus:0,menuPid:0}}),w=De(),P=x({["base.tableName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",trigger:"blur"}],["base.tableComment"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",trigger:"blur"}],["base.entityName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",trigger:"blur"}],["base.authorName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F5C\u8005",trigger:"blur"}],["gen.moduleName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",trigger:"blur"}],["gen.functionName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",trigger:"blur"}],["gen.treePrimary"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u4E3B\u952E\u5B57\u6BB5",trigger:"blur"}],["gen.treeParent"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u7236\u7EA7\u5B57\u6BB5",trigger:"blur"}],["gen.treeName"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u540D\u79F0\u5B57\u6BB5",trigger:"blur"}]}),H=async()=>{const r=await fe({id:L.query.id});Object.keys(t).forEach(o=>{t[o]=r[o]}),R()},{optionsData:D}=Te({dictType:{api:ve},menu:{api:Ne,transformData(r){const o={id:0,menuName:"\u9876\u7EA7",children:[]};return o.children=r,[o]}},dataTable:{api:Ve}}),y=U(!1),q=U([]),R=async()=>{y.value=!0;const r=await Be({tableName:t.gen.subTableName});y.value=!1,q.value=r},M=()=>{t.gen.subTableFk="",R()},J=async()=>{var r,o;try{await((r=w.value)==null?void 0:r.validate());const{base:E,column:f,gen:b}=t;await Ee({...E,...b,column:f}),$.msgSuccess("\u64CD\u4F5C\u6210\u529F"),O(),j.back()}catch(E){for(const f in E)Object.keys(P).includes(f)&&$.msgError((o=E[f][0])==null?void 0:o.message)}};return H(),(r,o)=>{const E=ee,f=ne,b=de,m=me,N=le,p=re,n=se,F=be,C=ie,Q=pe,v=ue,A=ae,W=te,G=oe,K=Fe,Z=ce,z=Y;return s(),c("div",Ae,[l(f,{class:"!border-none",shadow:"never"},{default:u(()=>[l(E,{content:"\u7F16\u8F91\u6570\u636E\u8868",onBack:o[0]||(o[0]=e=>r.$router.back())})]),_:1}),l(f,{class:"mt-4 !border-none",shadow:"never"},{default:u(()=>[l(K,{ref_key:"formRef",ref:w,class:"ls-form",model:a(t),"label-width":"130px",rules:a(P)},{default:u(()=>[l(G,{modelValue:a(T),"onUpdate:modelValue":o[20]||(o[20]=e=>ye(T)?T.value=e:null)},{default:u(()=>[l(N,{label:"\u57FA\u7840\u4FE1\u606F",name:"base"},{default:u(()=>[l(m,{label:"\u8868\u540D\u79F0",prop:"base.tableName"},{default:u(()=>[i("div",Ue,[l(b,{modelValue:a(t).base.tableName,"onUpdate:modelValue":o[1]||(o[1]=e=>a(t).base.tableName=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(m,{label:"\u8868\u63CF\u8FF0",prop:"base.tableComment"},{default:u(()=>[i("div",ke,[l(b,{modelValue:a(t).base.tableComment,"onUpdate:modelValue":o[2]||(o[2]=e=>a(t).base.tableComment=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:""},null,8,["modelValue"])])]),_:1}),l(m,{label:"\u5B9E\u4F53\u7C7B\u540D\u79F0",prop:"base.entityName"},{default:u(()=>[i("div",he,[l(b,{modelValue:a(t).base.entityName,"onUpdate:modelValue":o[3]||(o[3]=e=>a(t).base.entityName=e),placeholder:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(m,{label:"\u4F5C\u8005",prop:"base.authorName"},{default:u(()=>[i("div",we,[l(b,{modelValue:a(t).base.authorName,"onUpdate:modelValue":o[4]||(o[4]=e=>a(t).base.authorName=e),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",clearable:""},null,8,["modelValue"])])]),_:1}),l(m,{label:"\u5907\u6CE8"},{default:u(()=>[i("div",Pe,[l(b,{modelValue:a(t).base.remarks,"onUpdate:modelValue":o[5]||(o[5]=e=>a(t).base.remarks=e),class:"w-full",type:"textarea",autosize:{minRows:4,maxRows:4},maxlength:"200","show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1})]),_:1}),l(N,{label:"\u5B57\u6BB5\u7BA1\u7406",name:"column"},{default:u(()=>[l(Q,{data:a(t).column},{default:u(()=>[l(p,{label:"\u5B57\u6BB5\u5217\u540D",prop:"columnName"}),l(p,{label:"\u5B57\u6BB5\u63CF\u8FF0",prop:"columnComment","min-width":"120"},{default:u(({row:e})=>[l(b,{modelValue:e.columnComment,"onUpdate:modelValue":d=>e.columnComment=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u7269\u7406\u7C7B\u578B",prop:"columnType","min-width":"100"}),l(p,{label:"Java\u7C7B\u578B","min-width":"100"},{default:u(({row:e})=>[l(F,{modelValue:e.javaType,"onUpdate:modelValue":d=>e.javaType=d},{default:u(()=>[l(n,{label:"Long",value:"Long"}),l(n,{label:"String",value:"String"}),l(n,{label:"Integer",value:"Integer"}),l(n,{label:"Double",value:"Double"}),l(n,{label:"BigDecimal",value:"BigDecimal"}),l(n,{label:"Date",value:"Date"}),l(n,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"Java\u5C5E\u6027","min-width":"100"},{default:u(({row:e})=>[l(b,{modelValue:e.javaField,"onUpdate:modelValue":d=>e.javaField=d},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u5FC5\u586B",width:"80"},{default:u(({row:e})=>[l(C,{modelValue:e.isRequired,"onUpdate:modelValue":d=>e.isRequired=d,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u63D2\u5165",width:"80"},{default:u(({row:e})=>[l(C,{modelValue:e.isInsert,"onUpdate:modelValue":d=>e.isInsert=d,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u7F16\u8F91",width:"80"},{default:u(({row:e})=>[l(C,{modelValue:e.isEdit,"onUpdate:modelValue":d=>e.isEdit=d,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u5217\u8868",width:"80"},{default:u(({row:e})=>[l(C,{modelValue:e.isList,"onUpdate:modelValue":d=>e.isList=d,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u67E5\u8BE2",width:"80"},{default:u(({row:e})=>[l(C,{modelValue:e.isQuery,"onUpdate:modelValue":d=>e.isQuery=d,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u67E5\u8BE2\u65B9\u5F0F"},{default:u(({row:e})=>[l(F,{modelValue:e.queryType,"onUpdate:modelValue":d=>e.queryType=d},{default:u(()=>[l(n,{label:"=",value:"EQ"}),l(n,{label:"!=",value:"NE"}),l(n,{label:">",value:"GT"}),l(n,{label:">=",value:"GTE"}),l(n,{label:"<",value:"LT"}),l(n,{label:"<=",value:"LTE"}),l(n,{label:"LIKE",value:"LIKE"}),l(n,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u663E\u793A\u7C7B\u578B","min-width":"120"},{default:u(({row:e})=>[l(F,{modelValue:e.htmlType,"onUpdate:modelValue":d=>e.htmlType=d},{default:u(()=>[l(n,{label:"\u6587\u672C\u6846",value:"input"}),l(n,{label:"\u6570\u5B57\u6846",value:"number"}),l(n,{label:"\u6587\u672C\u57DF",value:"textarea"}),l(n,{label:"\u4E0B\u62C9\u6846",value:"select"}),l(n,{label:"\u5355\u9009\u6846",value:"radio"}),l(n,{label:"\u590D\u9009\u6846",value:"checkbox"}),l(n,{label:"\u65E5\u671F\u63A7\u4EF6",value:"datetime"}),l(n,{label:"\u56FE\u7247\u9009\u62E9\u63A7\u4EF6",value:"imageUpload"}),l(n,{label:"\u5BCC\u6587\u672C\u63A7\u4EF6",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"\u5B57\u5178\u7C7B\u578B","min-width":"120"},{default:u(({row:e})=>[l(F,{modelValue:e.dictType,"onUpdate:modelValue":d=>e.dictType=d,clearable:"",disabled:!(e.htmlType=="select"||e.htmlType=="radio"||e.htmlType=="checkbox"),placeholder:"\u5B57\u5178\u7C7B\u578B"},{default:u(()=>[(s(!0),c(g,null,V(a(D).dictType,(d,X)=>(s(),_(n,{key:X,label:d.dictName,value:d.dictType,disabled:!d.dictStatus},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),l(N,{label:"\u751F\u6210\u914D\u7F6E",name:"config"},{default:u(()=>[l(m,{label:"\u6A21\u677F\u7C7B\u578B",prop:"gen.genTpl",required:""},{default:u(()=>[l(A,{modelValue:a(t).gen.genTpl,"onUpdate:modelValue":o[6]||(o[6]=e=>a(t).gen.genTpl=e)},{default:u(()=>[l(v,{label:"crud"},{default:u(()=>[B("\u5355\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09")]),_:1},8,["label"]),l(v,{label:"tree"},{default:u(()=>[B("\u6811\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09")]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u6A21\u5757\u540D",prop:"gen.moduleName"},{default:u(()=>[i("div",qe,[l(b,{modelValue:a(t).gen.moduleName,"onUpdate:modelValue":o[7]||(o[7]=e=>a(t).gen.moduleName=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",clearable:""},null,8,["modelValue"]),Re])]),_:1}),l(m,{label:"\u529F\u80FD\u540D\u79F0",prop:"gen.functionName"},{default:u(()=>[i("div",$e,[l(b,{modelValue:a(t).gen.functionName,"onUpdate:modelValue":o[8]||(o[8]=e=>a(t).gen.functionName=e),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(m,{label:"\u751F\u6210\u65B9\u5F0F",prop:"gen.genType"},{default:u(()=>[i("div",null,[l(A,{modelValue:a(t).gen.genType,"onUpdate:modelValue":o[9]||(o[9]=e=>a(t).gen.genType=e)},{default:u(()=>[l(v,{label:0},{default:u(()=>[B("\u538B\u7F29\u5305\u4E0B\u8F7D")]),_:1},8,["label"]),l(v,{label:1},{default:u(()=>[B("\u81EA\u5B9A\u4E49\u8DEF\u5F84")]),_:1},8,["label"])]),_:1},8,["modelValue"]),xe])]),_:1}),l(m,{label:"\u83DC\u5355\u6784\u5EFA",prop:"gen.menuStatus",required:""},{default:u(()=>[i("div",null,[l(A,{modelValue:a(t).gen.menuStatus,"onUpdate:modelValue":o[10]||(o[10]=e=>a(t).gen.menuStatus=e)},{default:u(()=>[l(v,{label:1},{default:u(()=>[B("\u81EA\u52A8\u6784\u5EFA")]),_:1}),l(v,{label:0},{default:u(()=>[B("\u624B\u52A8\u6DFB\u52A0")]),_:1})]),_:1},8,["modelValue"]),Se])]),_:1}),l(m,{label:"\u7236\u7EA7\u83DC\u5355",prop:"gen.menuPid"},{default:u(()=>[l(W,{class:"w-80",modelValue:a(t).gen.menuPid,"onUpdate:modelValue":o[11]||(o[11]=e=>a(t).gen.menuPid=e),data:a(D).menu,clearable:"","node-key":"id",props:{label:"menuName"},"default-expand-all":"",placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(m,{label:"\u83DC\u5355\u540D\u79F0",prop:"gen.menuName"},{default:u(()=>[i("div",Ie,[l(b,{modelValue:a(t).gen.menuName,"onUpdate:modelValue":o[12]||(o[12]=e=>a(t).gen.menuName=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),a(t).gen.genType==1?(s(),_(m,{key:0,label:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",prop:"gen.genPath"},{default:u(()=>[i("div",Le,[l(b,{modelValue:a(t).gen.genPath,"onUpdate:modelValue":o[13]||(o[13]=e=>a(t).gen.genPath=e),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u8DEF\u5F84",clearable:""},null,8,["modelValue"])])]),_:1})):S("",!0),a(t).gen.genTpl=="tree"?(s(),c(g,{key:1},[l(m,{label:"\u6811\u4E3B\u952E\u5B57\u6BB5",prop:"gen.treePrimary"},{default:u(()=>[l(F,{class:"w-80",modelValue:a(t).gen.treePrimary,"onUpdate:modelValue":o[14]||(o[14]=e=>a(t).gen.treePrimary=e),clearable:""},{default:u(()=>[(s(!0),c(g,null,V(a(t).column,e=>(s(),_(n,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u6811\u7236\u7EA7\u5B57\u6BB5",prop:"gen.treeParent"},{default:u(()=>[l(F,{class:"w-80",modelValue:a(t).gen.treeParent,"onUpdate:modelValue":o[15]||(o[15]=e=>a(t).gen.treeParent=e),clearable:""},{default:u(()=>[(s(!0),c(g,null,V(a(t).column,e=>(s(),_(n,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u6811\u540D\u79F0\u5B57\u6BB5",prop:"gen.treeName"},{default:u(()=>[l(F,{class:"w-80",modelValue:a(t).gen.treeName,"onUpdate:modelValue":o[16]||(o[16]=e=>a(t).gen.treeName=e),clearable:""},{default:u(()=>[(s(!0),c(g,null,V(a(t).column,e=>(s(),_(n,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)):S("",!0)]),_:1}),l(N,{label:"\u5173\u8054\u914D\u7F6E",name:"relation"},{default:u(()=>[l(m,{label:"\u5173\u8054\u5B50\u8868\u7684\u8868\u540D",prop:"gen.subTableName"},{default:u(()=>[l(F,{class:"w-80",modelValue:a(t).gen.subTableName,"onUpdate:modelValue":o[17]||(o[17]=e=>a(t).gen.subTableName=e),clearable:"",onChange:M},{default:u(()=>[(s(!0),c(g,null,V(a(D).dataTable,e=>(s(),_(n,{key:e.tableName,value:e.tableName,label:`${e.tableName}\uFF1A${e.tableComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u5B50\u8868\u5173\u8054\u7684\u5916\u952E\u540D ",prop:"gen.subTableFk"},{default:u(()=>[l(F,{class:"w-80",modelValue:a(t).gen.subTableFk,"onUpdate:modelValue":o[18]||(o[18]=e=>a(t).gen.subTableFk=e),clearable:"",loading:a(y)},{default:u(()=>[(s(!0),c(g,null,V(a(q),e=>(s(),_(n,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),l(m,{label:"\u5173\u8054\u8868\u4E3B\u952E ",prop:"gen.subTableFr"},{default:u(()=>[l(F,{class:"w-80",modelValue:a(t).gen.subTableFr,"onUpdate:modelValue":o[19]||(o[19]=e=>a(t).gen.subTableFr=e),clearable:""},{default:u(()=>[(s(!0),c(g,null,V(a(t).column,e=>(s(),_(n,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1}),l(z,null,{default:u(()=>[l(Z,{type:"primary",onClick:J},{default:u(()=>[B("\u4FDD\u5B58")]),_:1})]),_:1})])}}});export{Ul as default};
