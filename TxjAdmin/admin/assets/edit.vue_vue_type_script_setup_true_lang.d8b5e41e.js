import{V as N,B as h,C as M,D as Y,F as S,G as L}from"./element-plus.28f30ed2.js";import{_ as O}from"./index.vue_vue_type_style_index_0_lang.3ff8d1ed.js";import{r as i,f as $}from"./index.93d1c242.js";import{p as j}from"./index.1d239a72.js";import{d as G,s as _,r as P,e as T,_ as z,$ as H,w as J,o as B,c as b,V as o,M as n,u as l,U as K,aa as Q}from"./@vue.cb90fff3.js";function re(r){return i.get({url:"/notice/list",params:r})}function W(r){return i.get({url:"/notice/detail",params:r})}function X(r){return i.post({url:"/notice/add",params:r})}function Z(r){return i.post({url:"/notice/edit",params:r})}function ne(r){return i.post({url:"/notice/del",params:r})}const ee={class:"edit-popup"},se=G({__name:"edit",props:{dataId:{type:Object}},emits:["success","close"],setup(r,{expose:E,emit:F}){const c=r,f=_(),p=_(),m=P("add"),V=T(()=>m.value=="edit"?"\u7F16\u8F91\u516C\u544A":"\u65B0\u589E\u516C\u544A"),v=[{value:"0",label:"\u5173\u95ED"},{value:"1",label:"\u5F00\u542F"}],u=z({id:"",title:"",content:"",contentDate:"",status:"",sort:"",versionNum:"",creator:"",updater:""}),C={id:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:["blur"]}],title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:["blur"]}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u544A\u5185\u5BB9",trigger:["blur"]}],contentDate:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u544A\u65E5\u671F",trigger:["blur"]}],status:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001\uFF1A1-\u5F00\u542F\uFF0C0-\u5173\u95ED",trigger:["blur"]}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F",trigger:["blur"]}],versionNum:[{required:!0,message:"\u8BF7\u8F93\u5165\u7248\u672C\u53F7",trigger:["blur"]}],creator:[{required:!0,message:"\u8BF7\u8F93\u5165\u521B\u5EFA\u4EBA",trigger:["blur"]}],updater:[{required:!0,message:"\u8BF7\u8F93\u5165\u66F4\u65B0\u4EBA",trigger:["blur"]}]},{dataId:D}=H(c),A=async()=>{var e,s;u.id=c.dataId.id,await((e=f.value)==null?void 0:e.validate());const a={...u};console.log(a),m.value=="edit"?await Z(a):await X(a),(s=p.value)==null||s.close(),$.msgSuccess("\u64CD\u4F5C\u6210\u529F"),F("success")},w=(a="add")=>{var e;m.value=a,(e=p.value)==null||e.open()},g=async a=>{for(const e in u)a[e]!=null&&a[e]!=null&&(u[e]=a[e])},k=async a=>{const e=await W({id:a});g(e)},q=()=>{F("close")};return J(D,(a,e)=>{k(c.dataId.id)}),E({open:w,setFormData:g}),(a,e)=>{const s=h,d=M,y=O,R=N,U=Y,x=S,I=L;return B(),b("div",ee,[o(j,{ref_key:"popupRef",ref:p,title:l(V),async:!0,width:"550px",clickModalClose:!0,onConfirm:A,onClose:q},{default:n(()=>[o(I,{ref_key:"formRef",ref:f,model:l(u),"label-width":"84px",rules:C},{default:n(()=>[o(d,{label:"\u6807\u9898",prop:"title"},{default:n(()=>[o(s,{modelValue:l(u).title,"onUpdate:modelValue":e[0]||(e[0]=t=>l(u).title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u516C\u544A\u5185\u5BB9",prop:"content"},{default:n(()=>[o(y,{modelValue:l(u).content,"onUpdate:modelValue":e[1]||(e[1]=t=>l(u).content=t),height:500},null,8,["modelValue"])]),_:1}),o(d,{label:"\u516C\u544A\u65E5\u671F",prop:"contentDate"},{default:n(()=>[o(R,{modelValue:l(u).contentDate,"onUpdate:modelValue":e[2]||(e[2]=t=>l(u).contentDate=t),type:"date","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u516C\u544A\u65E5\u671F"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u72B6\u6001\uFF1A",prop:"status"},{default:n(()=>[o(x,{modelValue:l(u).status,"onUpdate:modelValue":e[3]||(e[3]=t=>l(u).status=t),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001\uFF1A1-\u5F00\u542F\uFF0C0-\u5173\u95ED"},{default:n(()=>[(B(),b(K,null,Q(v,t=>o(U,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"\u6392\u5E8F",prop:"sort"},{default:n(()=>[o(s,{modelValue:l(u).sort,"onUpdate:modelValue":e[4]||(e[4]=t=>l(u).sort=t),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),o(d,{label:"\u7248\u672C\u53F7",prop:"versionNum"},{default:n(()=>[o(s,{modelValue:l(u).versionNum,"onUpdate:modelValue":e[5]||(e[5]=t=>l(u).versionNum=t),placeholder:"\u8BF7\u8F93\u5165\u7248\u672C\u53F7"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{se as _,re as a,ne as n};
