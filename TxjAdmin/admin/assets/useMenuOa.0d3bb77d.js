import{f as l}from"./index.93d1c242.js";import{a as D,b as m,c as b}from"./wx_oa.12f2b6c1.js";import{s as p,r as g,_ as E}from"./@vue.cb90fff3.js";const o=p(),a=g([]),r=g(0),w=({menuLength:n}={})=>E({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]},{trigger:["blur","change"],validator(h,c,t,v,F){const i=new TextEncoder().encode(c);n!==void 0&&i.length>n?t(new Error("\u957F\u5EA6\u8D85\u51FA\u9650\u5236")):t()}}],menuType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],visitType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],url:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]},{pattern:/(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/,message:"\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u7F51\u5740\u94FE\u63A5",trigger:["blur","change"]}],appId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],pagePath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}]}),y=n=>(n&&(o.value=n),{menuList:a,menuIndex:r,handleAddMenu:()=>{a.value.push({name:"\u83DC\u5355\u540D\u79F0",menuType:1,visitType:"view",url:"",appId:"",pagePath:"",subButtons:[]})},handleAddSubMenu:e=>{const u=r.value;if(a.value[u].subButtons.length>=5){l.msgError("\u5DF2\u6DFB\u52A0\u4E0A\u9650\uFF5E");return}a.value[u].subButtons.push(e)},handleEditSubMenu:(e,u)=>{const s=r.value;a.value[s].subButtons[u]=e},handleDelMenu:e=>{e!=0&&r.value--,a.value.splice(e,1)},handleDelSubMenu:(e,u)=>{a.value[e].subButtons.splice(u,1)},getOaMenuFunc:async()=>{try{a.value=await D()}catch(e){console.log("\u83B7\u53D6\u83DC\u5355=>",e)}},handleSave:async()=>{const e=o.value.value;for(let u=0;u<e.length;u++)try{await e[u].menuFormRef.validate()}catch{r.value=u;return}await m(a.value),l.msgSuccess("\u4FDD\u5B58\u6210\u529F")},handlePublish:async()=>{const e=o.value.value;for(let u=0;u<e.length;u++)try{await e[u].menuFormRef.validate()}catch{r.value=u;return}await b(a.value),l.msgSuccess("\u53D1\u5E03\u6210\u529F")}});export{w as g,y as u};
