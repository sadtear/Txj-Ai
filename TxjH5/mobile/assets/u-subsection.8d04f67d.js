import{_ as t,aB as e,aZ as i,a as s,b as o,o as n,e as r,f as l,i as a,F as u,l as h,n as d,y as f,g as c,h as m,t as b,j as g,k as y}from"./index-7044850c.js";import{_ as S}from"./u-badge.900e45cf.js";const p=t({name:"u-subsection",emits:["change"],props:{list:{type:Array,default:()=>[]},current:{type:[Number,String],default:0},activeColor:{type:String,default:"#303133"},inactiveColor:{type:String,default:"#606266"},mode:{type:String,default:"button"},fontSize:{type:[Number,String],default:28},animation:{type:Boolean,default:!0},height:{type:[Number,String],default:70},bold:{type:Boolean,default:!0},bgColor:{type:String,default:"#eeeeef"},buttonColor:{type:String,default:"#ffffff"},vibrateShort:{type:Boolean,default:!1},offset:{type:Array,default:function(){return[0,0]}}},data(){return{itemBgStyle:{width:0,left:0,backgroundColor:"#ffffff",height:"100%",transition:""},currentIndex:this.current,buttonPadding:3,borderRadius:5,firstTimeVibrateShort:!0}},watch:{current:{immediate:!0,handler(t){this.currentIndex=t,this.changeSectionStatus(t)}}},computed:{listInfo(){return this.list.map(((t,e)=>{if("object"!=typeof t){return{width:0,name:t}}return t.width=0,t}))},noBorderRight(){return t=>{if("subsection"!=this.mode)return;let e="";return t<this.list.length-1&&(e+=" u-none-border-right"),0==t&&(e+=" u-item-first"),t==this.list.length-1&&(e+=" u-item-last"),e}},textStyle(){return t=>{let e={};return"subsection"==this.mode?t==this.currentIndex?e.color="#ffffff":e.color=this.activeColor:t==this.currentIndex?e.color=this.activeColor:e.color=this.inactiveColor,t==this.currentIndex&&this.bold&&(e.fontWeight="bold"),e.fontSize=this.fontSize+"rpx",e}},itemStyle(){return t=>{let e={};return"subsection"==this.mode&&(e.borderColor=this.activeColor,e.borderWidth="1px",e.borderStyle="solid"),e}},subsectionStyle(){let t={};return t.height=e(this.height)+"px","button"==this.mode&&(t.backgroundColor=this.bgColor,t.padding=`${this.buttonPadding}px`,t.borderRadius=`${this.borderRadius}px`),t},itemBarStyle(){let t={};return t.backgroundColor=this.activeColor,t.zIndex=1,"button"==this.mode&&(t.backgroundColor=this.buttonColor,t.borderRadius=`${this.borderRadius}px`,t.bottom=`${this.buttonPadding}px`,t.height=e(this.height)-2*this.buttonPadding+"px",t.zIndex=0),Object.assign(this.itemBgStyle,t)}},mounted(){setTimeout((()=>{this.getTabsInfo()}),10)},methods:{changeSectionStatus(t){"subsection"==this.mode&&(t==this.list.length-1&&(this.itemBgStyle.borderRadius=`0 ${this.buttonPadding}px ${this.buttonPadding}px 0`),0==t&&(this.itemBgStyle.borderRadius=`${this.buttonPadding}px 0 0 ${this.buttonPadding}px`),t>0&&t<this.list.length-1&&(this.itemBgStyle.borderRadius="0")),setTimeout((()=>{this.itemBgLeft()}),10),this.vibrateShort&&this.firstTimeVibrateShort,this.firstTimeVibrateShort=!1},click(t){t!=this.currentIndex&&(this.currentIndex=t,this.changeSectionStatus(t),this.$emit("change",Number(t)))},getTabsInfo(){let t=i().in(this);for(let e=0;e<this.list.length;e++)t.select(".u-item-"+e).boundingClientRect();t.exec((t=>{t.length||setTimeout((()=>{this.getTabsInfo()}),10),t.map(((t,e)=>{this.listInfo[e].width=t.width})),("subsection"==this.mode||"button"==this.mode)&&(this.itemBgStyle.width=this.listInfo[0].width+"px"),this.itemBgLeft()}))},itemBgLeft(){this.animation?this.itemBgStyle.transition="all 0.35s":this.itemBgStyle.transition="all 0s";let t=0;this.listInfo.map(((e,i)=>{i<this.currentIndex&&(t+=e.width)})),"subsection"==this.mode?this.itemBgStyle.left=t+"px":"button"==this.mode&&(this.itemBgStyle.left=t+this.buttonPadding+"px")}}},[["render",function(t,e,i,p,x,B){const C=y,I=s(o("u-badge"),S);return n(),r(C,{class:"u-subsection",style:f([B.subsectionStyle])},{default:l((()=>[(n(!0),a(u,null,h(B.listInfo,((t,e)=>(n(),r(C,{class:d(["u-item u-line-1",[B.noBorderRight(e),"u-item-"+e]]),style:f([B.itemStyle(e)]),onClick:t=>B.click(e),key:e},{default:l((()=>[c(C,{style:f([B.textStyle(e)]),class:"u-item-text u-line-1"},{default:l((()=>[m(b(t.name),1)])),_:2},1032,["style"]),t.num>0?(n(),r(I,{key:0,count:t.num,offset:i.offset,size:"mini"},null,8,["count","offset"])):g("",!0)])),_:2},1032,["style","onClick","class"])))),128)),c(C,{class:"u-item-bg",style:f([B.itemBarStyle])},null,8,["style"])])),_:1},8,["style"])}],["__scopeId","data-v-9ea4e26d"]]);export{p as _};
