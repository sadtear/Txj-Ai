import{_ as e,a as t,b as l,o as i,e as a,f as s,h as o,t as n,g as r,s as c,y as u,j as f,n as d,k as p,D as g,E as y,B as m,r as h,a2 as x,X as b,Z as _,aS as k,be as I,aJ as w,i as C,l as S,F as v,G as j,an as z,H as L,K as A,b9 as D,L as T,a9 as U,bf as B,b8 as N}from"./index-7044850c.js";import{_ as q}from"./u-navbar.be6bc0fc.js";import{_ as $}from"./u-icon.593ee39b.js";import{_ as F}from"./u-button.5deae2bc.js";import{_ as J}from"./u-popup.449ebc77.js";import{_ as M}from"./u-select.d8e58a6c.js";import{i as V,j as E}from"./skills.7ca36a0a.js";import{i as H,f as K,w as W}from"./drawing.a9e06b49.js";import{a as G}from"./tools.60251ff5.js";import{s as O}from"./file.f1b16d86.js";import{t as P}from"./date.7d6fe851.js";const R=e({name:"u-tag",emits:["click","close"],props:{type:{type:String,default:"primary"},disabled:{type:[Boolean,String],default:!1},size:{type:String,default:"default"},shape:{type:String,default:"square"},text:{type:[String,Number],default:""},bgColor:{type:String,default:""},color:{type:String,default:""},borderColor:{type:String,default:""},closeColor:{type:String,default:""},index:{type:[Number,String],default:""},mode:{type:String,default:"light"},closeable:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data:()=>({}),computed:{customStyle(){let e={};return this.color&&(e.color=this.color),this.bgColor&&(e.backgroundColor=this.bgColor),"plain"==this.mode&&this.color&&!this.borderColor?e.borderColor=this.color:e.borderColor=this.borderColor,e},iconStyle(){if(!this.closeable)return;let e={};return"mini"==this.size?e.fontSize="20rpx":e.fontSize="22rpx","plain"==this.mode||"light"==this.mode?e.color=this.type:"dark"==this.mode&&(e.color="#ffffff"),this.closeColor&&(e.color=this.closeColor),e},closeIconColor(){return this.closeColor?this.closeColor:this.color?this.color:"dark"==this.mode?"#ffffff":this.type}},methods:{clickTag(){this.disabled||this.$emit("click",this.index)},close(){this.$emit("close",this.index)}}},[["render",function(e,g,y,m,h,x){const b=t(l("u-icon"),$),_=p;return y.show?(i(),a(_,{key:0,class:d([[y.disabled?"u-disabled":"","u-size-"+y.size,"u-shape-"+y.shape,"u-mode-"+y.mode+"-"+y.type],"u-tag"]),style:u([x.customStyle]),onClick:x.clickTag},{default:s((()=>[o(n(y.text),1),r(_,{class:"u-icon-wrap",onClick:g[0]||(g[0]=c((()=>{}),["stop"]))},{default:s((()=>[y.closeable?(i(),a(b,{key:0,onClick:x.close,size:"22",color:x.closeIconColor,name:"close",class:"u-close-icon",style:u([x.iconStyle])},null,8,["onClick","color","style"])):f("",!0)])),_:1})])),_:1},8,["class","style","onClick"])):f("",!0)}],["__scopeId","data-v-969b30ce"]]);const X=e({name:"u-col",props:{span:{type:[Number,String],default:12},offset:{type:[Number,String],default:0},justify:{type:String,default:"start"},align:{type:String,default:"center"},textAlign:{type:String,default:"left"},stop:{type:Boolean,default:!0}},data:()=>({gutter:20}),created(){this.parent=!1},mounted(){this.parent=this.$u.$parent.call(this,"u-row"),this.parent&&(this.gutter=this.parent.gutter)},computed:{uJustify(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align}},methods:{click(e){this.$emit("click")}}},[["render",function(e,t,l,o,n,r){const c=p;return i(),a(c,{class:d(["u-col",["u-col-"+l.span]]),style:u({padding:"0 "+(Number(n.gutter)/2+"rpx"),marginLeft:100/12*l.offset+"%",flex:`0 0 ${100/12*l.span}%`,alignItems:r.uAlignItem,justifyContent:r.uJustify,textAlign:l.textAlign}),onClick:r.click},{default:s((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])}],["__scopeId","data-v-911ff9de"]]);const Z=e({name:"u-row",props:{gutter:{type:[String,Number],default:20},justify:{type:String,default:"start"},align:{type:String,default:"center"},stop:{type:Boolean,default:!0}},computed:{uJustify(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align}},methods:{click(e){this.$emit("click")}}},[["render",function(e,t,l,o,n,r){const c=p;return i(),a(c,{class:"u-row",style:u({alignItems:r.uAlignItem,justifyContent:r.uJustify}),onClick:r.click},{default:s((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","onClick"])}],["__scopeId","data-v-50ad2824"]]),Q=e({__name:"workInfo",setup(e){const c=y(),d=m({swiperHeight:0,imageslim:"?imageView2/0/format/jpg/interlace/1/q/90|imageslim",activeCurrent:0,imageList:[],indexCurrent:1,showDate:!0,cssTran:!1,loadFlag:!1,img:"",params:{},picInfo:{},promptFlag:!1,userInfo:{},contributeShow:!1,form:{categoryLabel:"",categoryId:null},categorylist:[],categoryShow:!1});d.userInfo=c.userInfo,h(!1);const g=h(""),Q=h();h("#001f3f"),x((e=>{Q.value=e,console.log("onLoad",e),b({title:"图片加载中...",mask:!0}),V({id:e.taskId}).then((e=>{_(),e.imageUrls?-1!=e.imageUrls.indexOf(",")?e.imageUrlList=e.imageUrls.split(","):e.imageUrlList=[e.imageUrls]:e.imageUrlList=[],console.log(e.imageUrlList),e.imageUrlList.forEach((e=>{d.imageList.push({imageUrl:e})})),console.log(d.imageList),d.picInfo=e,0==e.quality?d.picInfo.qualityDesc="普通":1==e.quality||2==e.quality?d.picInfo.qualityDesc="高清":3==e.quality&&(d.picInfo.qualityDesc="精绘"),d.picInfo.drawTime=P(e.createTime,"yyyy-mm-dd hh:MM:ss")||"__",d.picInfo.workApproveStatus&&(d.picInfo.workTime=P(e.workCreateTime,"yyyy-mm-dd hh:MM:ss")||"__",0==d.picInfo.workApproveStatus?d.picInfo.contributeStatus="审批中":1==d.picInfo.workApproveStatus?d.picInfo.contributeStatus="已投稿":2==d.picInfo.workApproveStatus&&(d.picInfo.contributeStatus="已驳回")),g.value=e.imageUrl;let t=e.scale.split(":"),l=750*parseInt(t[1])/parseInt(t[0]);d.swiperHeight=l})).catch((e=>{_(),console.log("绘画信息查询失败: ",e),k({title:"靓仔查询绘画失败啦，稍后在试吧",duration:2e3}),setTimeout((()=>{I({url:"/pages/drawing/drawing"})}),2e3)})).finally((e=>{}))})),w((()=>{_()}));const Y=()=>{G(d.imageList[d.activeCurrent].imageUrl)},ee=()=>{O(d.imageList[d.activeCurrent].imageUrl)};H().then((e=>{d.categorylist=e,d.categorylist.splice(-1,1);for(let t=0;t<d.categorylist.length;t++)d.categorylist[t].status=!1}));const te=e=>{console.log("val",e[0]),d.form.categoryId=e[0].value,d.form.categoryLabel=e[0].label};function le(e){d.indexCurrent=e.detail.current+1}function ie(){d.cssTran=!d.cssTran}const ae=()=>{z({title:"提示",placeholderText:"是否要删除？？",content:"是否要删除？",showCancel:!0,cancelText:"取消",confirmText:"删除",success:function(e){e.confirm?K([d.picInfo.id]).then((e=>{L({url:"/packages/pages/folder_pic/folder_pic"})})).catch((e=>{console.log("删除绘画失败=>",error)})):console.log("取消")},fail:function(e){console.log("取消",e)}})},se=()=>{var e=U(),t=e[e.length-1];B({url:t.$page.fullPath})},oe=()=>{c.isLogin?"MJ"==d.picInfo.channel&&c.userInfo.balanceDraw<2*d.picInfo.batchSize||"SD"==d.picInfo.channel&&c.userInfo.balanceDraw<3*d.picInfo.batchSize?k({title:"请联系管理员",icon:"none"}):L({url:"/pages/skills/generate/generate?id="+d.picInfo.drawWorkId}):L({url:"/pages/login/login"})},ne=()=>{"MJ"==d.picInfo.channel&&c.userInfo.balanceDraw<2*d.picInfo.batchSize||"SD"==d.picInfo.channel&&c.userInfo.balanceDraw<3*d.picInfo.batchSize?k({title:"请联系管理员",icon:"none"}):L({url:"/pages/skills/generate/generate"})},re=()=>{d.form.categoryId?E({drawRecordId:d.picInfo.id,categoryId:d.form.categoryId,usageMoney:0}).then((e=>{k({title:"投稿成功！",icon:"none"}),se()})):k({title:"请选择投稿的分类",icon:"none"})};h(!1);return(e,g)=>{const y=t(l("u-navbar"),q),m=p,h=A,x=N,b=D,I=t(l("u-icon"),$),w=T,z=t(l("u-button"),F),U=t(l("u-tag"),R),B=t(l("u-col"),X),V=t(l("u-row"),Z),E=t(l("u-popup"),J),H=t(l("u-select"),M);return i(),a(m,{class:"bg",style:{"background-color":"#000",position:"relative"}},{default:s((()=>[r(m,null,{default:s((()=>[r(y,{title:"作品详情",autoBack:!0,borderBottom:!1,background:{background:"#1c1c1e"},titleColor:"#fff",backIconColor:"#fff",class:"navber_fanhui"})])),_:1}),r(m,{class:"",style:{}},{default:s((()=>[r(b,{style:u([{width:"750rpx"},"height: "+d.swiperHeight+"rpx;"]),circular:!0,"indicator-dots":"true",onChange:le,current:d.activeCurrent},{default:s((()=>[(i(!0),C(v,null,S(d.imageList,((e,t)=>(i(),a(x,{key:t},{default:s((()=>[r(h,{onLoad:g[0]||(g[0]=e=>{_()}),src:e.imageUrl+d.imageslim,onClick:ie,style:{width:"100vw"},mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1},8,["style","current"])])),_:1}),r(m,{style:{display:"flex","justify-content":"space-between",padding:"30rpx"}},{default:s((()=>[d.picInfo.workApproveStatus?(i(),a(m,{key:0,style:{display:"flex","align-items":"center"},onClick:g[1]||(g[1]=e=>{return t=d.picInfo.userId,void(c.isLogin?L({url:"/pages/skills/pic-list/picList?from="+t}):L({url:"/pages/login/login"}));var t})},{default:s((()=>[r(m,{style:{"margin-right":"16rpx"}},{default:s((()=>[r(h,{style:{width:"70rpx",height:"70rpx","border-radius":"50%"},src:d.picInfo.avatar},null,8,["src"])])),_:1}),r(m,{style:{"margin-right":"16rpx","margin-bottom":"10rpx",color:"#9a9ea8","font-size":"30rpx"}},{default:s((()=>[o(n(d.picInfo.nickname),1)])),_:1}),r(m,{style:{"margin-right":"16rpx"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_home03.png",size:"40"})])),_:1})])),_:1})):(i(),a(m,{key:1,style:{display:"flex","align-items":"center"}},{default:s((()=>[r(m,{style:{display:"flex"}},{default:s((()=>[r(m,{class:"label-style"},{default:s((()=>[o(" 绘图时间："+n(d.picInfo.drawTime),1)])),_:1})])),_:1})])),_:1})),d.picInfo.workApproveStatus&&1==d.picInfo.workApproveStatus?(i(),a(m,{key:2,style:{display:"flex","align-items":"center",color:"#fff"}},{default:s((()=>[r(m,{class:"flex",style:{"margin-right":"50rpx"}},{default:s((()=>[r(m,{style:{"margin-right":"12rpx"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_draw.png",color:"#fff",size:"42"})])),_:1}),r(m,{style:{"font-weight":"600","margin-top":"6rpx","font-size":"28rpx"}},{default:s((()=>[o(n(d.picInfo.usageNum),1)])),_:1})])),_:1}),r(m,{class:"flex",onClick:g[2]||(g[2]=e=>{return t=d.picInfo.drawWorkId,void(c.isLogin?W({id:t}).then((e=>{k({title:"收藏成功！",icon:"none"}),se()})):L({url:"/pages/login/login"}));var t})},{default:s((()=>[r(m,{style:{"margin-right":"12rpx"}},{default:s((()=>[d.picInfo.collect?(i(),a(I,{key:1,name:"star-fill",color:"#ebb157",size:"40"})):(i(),a(I,{key:0,name:"star",color:"#fff",size:"40"}))])),_:1}),r(m,{style:{"font-weight":"900","font-size":"28rpx"}},{default:s((()=>[o(n(d.picInfo.collectNum),1)])),_:1})])),_:1})])),_:1})):d.picInfo.workApproveStatus&&0==d.picInfo.workApproveStatus?(i(),a(m,{key:3,style:{display:"flex","align-items":"center",color:"#fff"}},{default:s((()=>[r(m,{class:"flex"},{default:s((()=>[r(m,{style:{"margin-right":"12rpx"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_send.png",color:"#fff",size:"40"})])),_:1}),r(m,{style:{"font-weight":"900","font-size":"28rpx"}},{default:s((()=>[o("投稿中")])),_:1})])),_:1})])),_:1})):1==d.picInfo.type?(i(),a(m,{key:4,style:{display:"flex","align-items":"center",color:"#fff"}},{default:s((()=>[r(m,{class:"flex",onClick:g[3]||(g[3]=e=>d.contributeShow=!0)},{default:s((()=>[r(m,{style:{"margin-right":"12rpx"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_send.png",color:"#fff",size:"40"})])),_:1}),r(m,{style:{"font-weight":"900","font-size":"28rpx"}},{default:s((()=>[o("投稿")])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1}),r(m,{style:{height:"1px",background:"#515151"}}),r(m,{style:{color:"#fff",background:"#000","padding-bottom":"120rpx"}},{default:s((()=>[d.picInfo.workApproveStatus&&"gallery"!=Q.value.type&&d.picInfo.userId==d.userInfo.id?(i(),a(m,{key:0,style:{display:"flex",padding:"20rpx 30rpx"}},{default:s((()=>[r(m,{class:"label-style"},{default:s((()=>[o(" 投稿时间： ")])),_:1}),r(m,null,{default:s((()=>[o(n(d.picInfo.workTime),1)])),_:1})])),_:1})):f("",!0),d.picInfo.workApproveStatus&&"gallery"!=Q.value.type&&d.picInfo.userId==d.userInfo.id?(i(),a(m,{key:1,style:{display:"flex",padding:"20rpx 30rpx"}},{default:s((()=>[r(m,{class:"label-style"},{default:s((()=>[o(" 投稿状态： ")])),_:1}),r(m,null,{default:s((()=>[o(n(d.picInfo.contributeStatus),1)])),_:1})])),_:1})):f("",!0),1==d.picInfo.type?(i(),a(m,{key:2,style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 关键词： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.prompt),1)])),_:1})])),_:1})):f("",!0),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 绘图类型： ")])),_:1}),r(w,null,{default:s((()=>[o(n(1==d.picInfo.type?"文生图":"图生图"),1)])),_:1})])),_:1}),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 绘画渠道： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.channel),1)])),_:1})])),_:1}),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 风格： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.styleName),1)])),_:1})])),_:1}),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 画幅： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.scale),1)])),_:1})])),_:1}),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 图片质量： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.qualityDesc),1)])),_:1})])),_:1}),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 生成张数： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.batchSize)+" 张 ",1)])),_:1})])),_:1}),r(m,{style:{padding:"20rpx 30rpx"}},{default:s((()=>[r(w,{class:"label-style"},{default:s((()=>[o(" 任务ID： ")])),_:1}),r(w,null,{default:s((()=>[o(n(d.picInfo.taskId),1)])),_:1})])),_:1})])),_:1}),d.picInfo.workApproveStatus?(i(),a(m,{key:0,style:{display:"flex",width:"100vw",height:"120rpx","background-color":"#1f1f1f","align-items":"center",padding:"0 30rpx","justify-content":"space-between",position:"fixed",bottom:"0",left:"0","z-index":"90"}},{default:s((()=>[r(m,{style:{display:"flex"}},{default:s((()=>[r(m,{onClick:Y,style:{width:"68rpx",height:"68rpx","border-radius":"50%","background-color":"#666666",display:"flex","justify-content":"center","align-items":"center"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_link03.png",size:"40"})])),_:1})])),_:1}),r(m,null,{default:s((()=>[r(z,{class:"custom-style",onClick:oe,"custom-style":{color:"#fff",background:"linear-gradient(95.58deg,#9472c7,#5c3fb5)"},hairLine:!1,style:{width:"160rp1x",height:"76rpx",border:"none"},shape:"circle"},{default:s((()=>[o("画同款")])),_:1},8,["custom-style"])])),_:1})])),_:1})):(i(),a(m,{key:1,style:{display:"flex",width:"100vw",height:"120rpx","background-color":"#1f1f1f","align-items":"center",padding:"0 30rpx","justify-content":"space-between",position:"fixed",bottom:"0",left:"0","z-index":"90"}},{default:s((()=>[r(m,{style:{display:"flex"}},{default:s((()=>[r(m,{onClick:ae,style:{width:"68rpx",height:"68rpx","border-radius":"50%","background-color":"#666666",display:"flex","justify-content":"center","align-items":"center","margin-right":"20rpx"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_del.png",size:"40"})])),_:1}),r(m,{onClick:ee,style:{width:"68rpx",height:"68rpx","border-radius":"50%","background-color":"#666666",display:"flex","justify-content":"center","align-items":"center"}},{default:s((()=>[r(I,{name:"../../../static/images/icon/icon_download.png",size:"40"})])),_:1})])),_:1}),r(m,null,{default:s((()=>[r(z,{class:"custom-style",onClick:ne,"custom-style":{color:"#fff",background:"linear-gradient(95.58deg,#9472c7,#5c3fb5)"},hairLine:!1,style:{width:"160rpx",height:"76rpx",border:"none"},shape:"circle"},{default:s((()=>[o("再画一张")])),_:1},8,["custom-style"])])),_:1})])),_:1})),r(E,{modelValue:d.contributeShow,"onUpdate:modelValue":g[5]||(g[5]=e=>d.contributeShow=e),"border-radius":"20",mode:"center",width:"600rpx",class:"contribute"},{default:s((()=>[j("div",{class:"contributeType"},[j("p",{class:"title"},"请选择投稿分类"),r(V,{gutter:"10",style:{"margin-top":"10px"}},{default:s((()=>[(i(!0),C(v,null,S(d.categorylist,((e,t)=>(i(),a(B,{span:"4",textAlign:"left"},{default:s((()=>[r(m,{class:"demo-layout bg-purple",tabindex:"1",style:{height:"40px"}},{default:s((()=>[r(U,{class:"content",text:e.name,plain:!e.status,type:"warning",name:t,onClick:l=>((e,t)=>{d.categorylist.map(((t,l)=>{t.status=l===e})),d.form.categoryId=t.id})(t,e),style:u([{border:e.status?"1px solid #25C7FE ":"none",color:e.status?"#fff":"#BBBBBB ",width:"90%",height:"90%",background:e.status?"#5c3fb5":"#4A494E"},{}])},null,8,["text","plain","name","onClick","style"])])),_:2},1024)])),_:2},1024)))),256))])),_:1})]),r(m,{class:"flex justify-between my-[8rpx] buttons"},{default:s((()=>[r(z,{size:"medium",hairLine:!1,class:"custom-style","custom-style":{color:"#fff",background:"linear-gradient(95.58deg,#62009E ,#23CAFF)"},style:{width:"260rpx",height:"76rpx",border:"none"},onClick:re},{default:s((()=>[o("投稿")])),_:1},8,["custom-style"]),r(z,{type:"info",size:"medium",hairLine:!1,class:"custom-style","custom-style":{color:"#fff",background:"linear-gradient(95.58deg,#62009E ,#23CAFF)"},style:{border:"none",background:"none","margin-top":"10px",color:"#CDCDCD"},onClick:g[4]||(g[4]=e=>d.contributeShow=!1)},{default:s((()=>[r(I,{name:"../../../static/images/icon/close.png",size:"40",class:"custom-style"}),o("  取消")])),_:1},8,["custom-style"])])),_:1})])),_:1},8,["modelValue"]),r(H,{modelValue:d.categoryShow,"onUpdate:modelValue":g[6]||(g[6]=e=>d.categoryShow=e),list:d.categorylist,valueName:"id",onConfirm:te,confirmColor:"#6f4bd4",labelName:"name"},null,8,["modelValue","list"])])),_:1})}}},[["__scopeId","data-v-5fc7a7e1"]]);export{Q as default};
