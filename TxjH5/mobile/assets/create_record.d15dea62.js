import{_ as e,aB as t,a as o,b as s,o as a,e as n,f as l,g as r,n as i,y as d,D as u,h as c,t as p,j as h,k as f,L as m,d as g,x,i as _,F as w,l as y,u as k,s as C,G as S}from"./index-7044850c.js";import{_ as b}from"./u-icon.593ee39b.js";import{_ as M}from"./text-item.vue_vue_type_script_setup_true_lang.3f8512ea.js";const I=e({name:"u-read-more",emits:["open","close"],props:{showHeight:{type:[Number,String],default:400},toggle:{type:Boolean,default:!1},closeText:{type:String,default:"展开阅读全文"},openText:{type:String,default:"收起"},color:{type:String,default:"#2979ff"},fontSize:{type:[String,Number],default:28},shadowStyle:{type:Object,default:()=>({backgroundImage:"linear-gradient(-180deg, rgba(255, 255, 255, 0) 0%, #fff 80%)",paddingTop:"300rpx",marginTop:"-300rpx"})},textIndent:{type:String,default:"2em"},index:{type:[Number,String],default:""}},watch:{paramsChange(e){this.init()}},computed:{paramsChange(){return`${this.toggle}-${this.showHeight}`},innerShadowStyle(){return this.showMore?{}:this.shadowStyle}},data(){return{isLongContent:!1,showMore:!1,elId:this.$u.guid()}},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){this.$uGetRect("."+this.elId).then((e=>{e.height>t(this.showHeight)&&(this.isLongContent=!0,this.showMore=!1)}))},toggleReadMore(){this.showMore=!this.showMore,0==this.toggle&&(this.isLongContent=!1),this.$emit(this.showMore?"open":"close",this.index)}}},[["render",function(e,t,g,x,_,w){const y=f,k=m,C=o(s("u-icon"),b);return a(),n(y,{class:""},{default:l((()=>[r(y,{class:i(["u-content",[_.elId]]),style:d({height:_.isLongContent&&!_.showMore?g.showHeight+"rpx":"auto",textIndent:g.textIndent})},{default:l((()=>[u(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),_.isLongContent?(a(),n(y,{key:0,onClick:w.toggleReadMore,class:i(["u-content__showmore-wrap",{"u-content__show-more":_.showMore}]),style:d([w.innerShadowStyle])},{default:l((()=>[r(k,{class:"u-content__showmore-wrap__readmore-btn",style:d({fontSize:g.fontSize+"rpx",color:g.color})},{default:l((()=>[c(p(_.showMore?g.openText:g.closeText),1)])),_:1},8,["style"]),r(y,{class:"u-content__showmore-wrap__readmore-btn__icon u-flex"},{default:l((()=>[r(C,{color:g.color,size:g.fontSize,name:_.showMore?"arrow-up":"arrow-down"},null,8,["color","size","name"])])),_:1})])),_:1},8,["onClick","class","style"])):h("",!0)])),_:3})}],["__scopeId","data-v-96e2f092"]]),v=e(g({__name:"creation-history-item",props:{title:{default:""},time:{default:""},content:{default:()=>[]},overflow:{type:Boolean,default:!1},showCopy:{type:Boolean,default:!0},showRewrite:{type:Boolean,default:!1}},emits:["click-title","copy","delete","rewrite"],setup(e,{emit:t}){const i=x();return(d,u)=>{const m=f,g=o(s("u-read-more"),I),x=o(s("u-icon"),b);return a(),n(m,{class:"create-record-item"},{default:l((()=>[r(m,{class:"flex items-center"},{default:l((()=>[r(m,{class:"text-lg line-clamp-1 font-medium",onClick:u[0]||(u[0]=o=>t("click-title",e.title))},{default:l((()=>[c(p(e.title),1)])),_:1})])),_:1}),r(m,{class:"flex items-center text-xs"},{default:l((()=>[r(m,{class:"text-muted mt-[10rpx] mr-auto"},{default:l((()=>[c(p(e.time),1)])),_:1})])),_:1}),(a(!0),_(w,null,y(e.content,((o,s)=>(a(),n(m,{class:"mt-[10px] bg-page p-[20rpx] rounded-[14rpx]",key:s},{default:l((()=>[r(m,null,{default:l((()=>[e.overflow?(a(),n(g,{key:0,toggle:!0},{default:l((()=>[r(m,{class:"indent-0 text-main"},{default:l((()=>[r(M,{"is-markdown":!!k(i).getChatConfig.is_markdown,content:o},null,8,["is-markdown","content"])])),_:2},1024)])),_:2},1024)):(a(),n(m,{key:1},{default:l((()=>[r(M,{"is-markdown":!!k(i).getChatConfig.is_markdown,content:o},null,8,["is-markdown","content"])])),_:2},1024))])),_:2},1024),r(m,{class:"flex justify-end"},{default:l((()=>[e.showRewrite?(a(),n(m,{key:0,class:"mt-[20rpx] mr-[20rpx] flex bg-white px-[26rpx] py-[10rpx] rounded-full text-content",onClick:u[1]||(u[1]=C((e=>t("rewrite")),["stop"]))},{default:l((()=>[r(x,{name:"edit-pen"}),S("span",{class:"text-xs ml-[10rpx]"}," 重写")])),_:1})):h("",!0),e.showCopy?(a(),n(m,{key:1,class:"mt-[20rpx] flex bg-white px-[26rpx] py-[10rpx] rounded-full text-content",onClick:C((e=>t("copy",o)),["stop"])},{default:l((()=>[r(x,{name:"file-text"}),S("span",{class:"text-xs ml-[10rpx]"}," 复制")])),_:2},1032,["onClick"])):h("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})}}}),[["__scopeId","data-v-635675b1"]]),T="/mobile/assets/create_record-353a2bee.png";export{T as _,v as a};
