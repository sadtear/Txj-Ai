import{d as e,A as o,r as a,E as l,B as t,o as s,e as r,f as u,g as d,h as i,t as m,Q as n,R as c,aL as f,as as b,a as p,b as _,k as x,_ as h}from"./index-7044850c.js";import{_ as v}from"./u-input.1eff233e.js";import{_ as g}from"./u-form-item.9f9aa37f.js";import{_ as j}from"./u-verification-code.948df417.js";import{_ as k}from"./u-form.17c058c3.js";import{_ as V}from"./u-button.5deae2bc.js";import"./u-icon.593ee39b.js";const w=h(e({__name:"bind_mobile",setup(e){const h=o(),w=a(""),y=l(),B=e=>{w.value=e},C=t({type:"bind",mobile:"",code:""}),$=async()=>{var e,o;if(!C.mobile)return uni.$u.toast("请输入手机号码");(null==(e=h.value)?void 0:e.canGetCode)&&(await n({scene:c.BIND_MOBILE,mobile:C.mobile}),uni.$u.toast("发送成功"),null==(o=h.value)||o.start())},T=async()=>C.mobile?C.code?(await f(C,{token:y.temToken}),uni.$u.toast("绑定成功"),y.login(y.temToken),void setTimeout((()=>{b()}),1e3)):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,o)=>{const a=p(_("u-input"),v),l=p(_("u-form-item"),g),t=p(_("u-verification-code"),j),n=x,c=p(_("u-form"),k),f=p(_("u-button"),V);return s(),r(n,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:u((()=>[d(n,{class:"w-full"},{default:u((()=>[d(c,{borderBottom:"","label-width":150},{default:u((()=>[d(l,{label:"手机号",borderBottom:""},{default:u((()=>[d(a,{class:"flex-1",modelValue:C.mobile,"onUpdate:modelValue":o[0]||(o[0]=e=>C.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),d(l,{label:"验证码",borderBottom:""},{default:u((()=>[d(a,{class:"flex-1",modelValue:C.code,"onUpdate:modelValue":o[1]||(o[1]=e=>C.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),d(n,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:$},{default:u((()=>[d(t,{ref_key:"uCodeRef",ref:h,seconds:60,onChange:B,"change-text":"x秒"},null,512),i(" "+m(w.value),1)])),_:1})])),_:1})])),_:1}),d(n,{class:"mt-[40rpx]"},{default:u((()=>[d(f,{type:"primary",shape:"circle",onClick:T},{default:u((()=>[i(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-94e14dde"]]);export{w as default};
