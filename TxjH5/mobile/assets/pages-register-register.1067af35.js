import{_ as e}from"./page-meta.66d6713f.js";import{d as a,x as l,A as o,B as s,r as t,c as r,o as u,i as d,g as i,f as m,u as n,e as f,n as c,h as p,t as b,j as _,F as g,T as x,Q as v,R as w,ah as y,a as h,b as V,L as j,k,_ as $}from"./index-7044850c.js";import{_ as S}from"./u-input.1eff233e.js";import{_ as B}from"./u-form-item.9f9aa37f.js";import{_ as C}from"./u-verification-code.948df417.js";import{_ as R}from"./u-form.17c058c3.js";import{_ as U}from"./agreement.bddbc7e6.js";import{_ as T}from"./u-button.5deae2bc.js";import"./u-icon.593ee39b.js";import"./u-checkbox.ccdf91cf.js";const A=$(a({__name:"register",setup(a){const $=x(),A=l(),E=o(),F=s({mobile:"",code:"",password:"",password2:""}),G=o(),I=t(""),L=e=>{I.value=e},J=r((()=>uni.$u.test.mobile(F.mobile))),M=r((()=>{var e;return 1==(null==(e=A.getLoginConfig)?void 0:e.smsVerify)})),N=async()=>{var e,a;F.mobile&&J.value&&(null==(e=G.value)?void 0:e.canGetCode)&&(await v({scene:w.REGISTER,mobile:F.mobile}),uni.$u.toast("发送成功"),null==(a=G.value)||a.start())},Q=async()=>{var e;if(null==(e=E.value)?void 0:e.checkAgreement()){if(!F.mobile)return uni.$u.toast("请输入手机号码");if(!F.code&&M.value)return uni.$u.toast("请输入验证码");if(!F.password)return uni.$u.toast("请输入密码");if(!F.password2)return uni.$u.toast("请输入确认密码");if(F.password!=F.password2)return uni.$u.toast("两次输入的密码不一致");M.value||(F.code=null),await y(F),uni.$u.toast("注册成功"),setTimeout((()=>{$.navigateBack()}),1e3)}};return(a,l)=>{const o=h(V("page-meta"),e),s=h(V("u-input"),S),t=h(V("u-form-item"),B),r=h(V("u-verification-code"),C),x=j,v=k,w=h(V("u-form"),R),y=h(V("agreement"),U),$=h(V("u-button"),T);return u(),d(g,null,[i(o,{"page-style":a.$theme.pageStyle},null,8,["page-style"]),i(v,{class:"register min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:m((()=>[i(v,{class:"w-full"},{default:m((()=>[i(w,{borderBottom:"","label-width":150},{default:m((()=>[i(t,{label:"手机号",borderBottom:""},{default:m((()=>[i(s,{class:"flex-1",customStyle:{color:"#fff"},modelValue:F.mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>F.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),n(M)?(u(),f(t,{key:0,label:"验证码"},{default:m((()=>[i(s,{class:"flex-1",customStyle:{color:"#fff"},modelValue:F.code,"onUpdate:modelValue":l[1]||(l[1]=e=>F.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),i(v,{class:"border-l border-solid border-0 border-light pl-3 leading-4 ml-3 w-[180rpx]",onClick:N},{default:m((()=>[i(r,{ref_key:"uCodeRef",ref:G,seconds:60,onChange:L,"change-text":"x秒"},null,512),i(x,{class:c(n(J)?"text-primary":"text-muted")},{default:m((()=>[p(b(I.value),1)])),_:1},8,["class"])])),_:1})])),_:1})):_("",!0),i(t,{label:"设置密码",borderBottom:""},{default:m((()=>[i(s,{class:"flex-1",customStyle:{color:"#fff"},type:"password",modelValue:F.password,"onUpdate:modelValue":l[2]||(l[2]=e=>F.password=e),placeholder:"6-20位数字+字母或符号组合",border:!1},null,8,["modelValue"])])),_:1}),i(t,{label:"确认密码",borderBottom:""},{default:m((()=>[i(s,{class:"flex-1",customStyle:{color:"#fff"},type:"password",modelValue:F.password2,"onUpdate:modelValue":l[3]||(l[3]=e=>F.password2=e),placeholder:"请确认密码",border:!1},null,8,["modelValue"])])),_:1})])),_:1}),i(v,{class:"mt-[40rpx]"},{default:m((()=>[i(y,{ref_key:"agreementRef",ref:E},null,512)])),_:1}),i(v,{class:"mt-[60rpx]"},{default:m((()=>[i($,{class:"login-btn",plain:"",shape:"circle",onClick:Q},{default:m((()=>[p(" 注册 ")])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-d3ce748c"]]);export{A as default};
