import{_ as e,E as a,B as l,a2 as t,r,bb as s,aS as o,o as i,e as n,f as d,bc as c,k as u,g as p,i as f,l as g,F as m,j as y,a as x,b as _,n as k,h as v,t as b,H as h,K as w,L as I}from"./index-7044850c.js";import{_ as j}from"./u-search.a56fdc0d.js";import{_ as L}from"./u-tabs.d281666d.js";import{_ as C,a as S}from"./u-waterfall.ba7dc9da.js";import{_ as V}from"./u-icon.593ee39b.js";import{_ as z}from"./empty.db890288.js";import{_ as N}from"./tabbar.vue_vue_type_script_setup_true_lang.ba1d1694.js";import{o as U}from"./skills.7ca36a0a.js";import{i as B}from"./drawing.a9e06b49.js";import{c as R}from"./tools.60251ff5.js";import"./u-badge.900e45cf.js";/* empty css                                                               */const H=e({__name:"gallery",setup(e){const H=a(),E=l({keyword:"",categorylist:[],current:0,categoryId:-1,imgList:[],delImg:{id:""},userInfo:{},screenList:[{id:0,name:"最新"},{id:1,name:"最热"}],activeScreen:0});E.userInfo=H.userInfo,t((()=>{let e=c();console.log("option",e.attrs.from),Z(),q(E.categoryId,E.keyword)})),r(null);const F=r(1),K=r(10),M=r(0),T=r(!1),Z=()=>{B().then((e=>{console.log("res: ",e),E.categorylist=e}))},q=(e,a)=>{T.value=!0,U({pageNo:F.value,pageSize:K.value,categoryId:e,prompt:E.keyword,orderByType:E.activeScreen}).then((async e=>{console.log("res: ",e),E.imgList=[],e.lists=R(e.lists,"imageUrl"),1==F.value?(await G.value.clear(),E.imgList=e.lists):E.imgList=[...E.imgList,...e.lists],M.value=e.count,T.value=!1})).catch((e=>{T.value=!1}))};s((()=>{if(console.log("onReachBottom",T.value),!T.value){if(10*F.value>=M.value)return console.log("没有更多啦"),void o({title:"靓仔到底啦！",icon:"none"});F.value++,q(E.categoryId,E.keyword)}}));const A=e=>{E.current=e,console.log("选择分类：",E.current),E.categoryId=E.categorylist[e].id,q(E.categoryId,E.keyword)},D=e=>{h({url:"/pages/skills/workInfo/workInfo?taskId="+e.drawRecordsId})};r(null);const G=r();return(e,a)=>{const l=x(_("u-search"),j),t=u,r=x(_("u-tabs"),L),s=x(_("u-lazy-load"),C),o=w,c=x(_("u-icon"),V),h=I,U=x(_("u-waterfall"),S),B=x(_("empty"),z),R=x(_("tabbar"),N);return i(),n(t,{class:"list-box flex flex-column"},{default:d((()=>[p(t,{class:"py-[14rpx] px-[30rpx]"},{default:d((()=>[p(l,{modelValue:E.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>E.keyword=e),placeholder:"请输入关键词搜索",height:"72","bg-color":"#25242a",color:"#999","show-action":!1,onSearch:a[1]||(a[1]=e=>(console.log("keyword: ",E.keyword),void q(E.categoryId,E.keyword)))},null,8,["modelValue"])])),_:1}),p(r,{list:E.categorylist,"active-color":"#6f4bd4","inactive-color":"#999","bg-color":"#000000","font-size":"30",current:E.current,onChange:A},null,8,["list","current"]),p(t,{class:"screen flex justify-between c-9",style:{padding:"30rpx 30rpx"}},{default:d((()=>[p(t,{class:"flex screen-list"},{default:d((()=>[(i(!0),f(m,null,g(E.screenList,(e=>(i(),n(t,{key:e.id,onClick:a=>{return l=e.id,E.activeScreen=l,void q(E.categoryId);var l},class:k({active:E.activeScreen===e.id})},{default:d((()=>[v(b(e.name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),p(t,{style:{padding:"0 30rpx"}},{default:d((()=>[p(U,{modelValue:E.imgList,"onUpdate:modelValue":a[2]||(a[2]=e=>E.imgList=e),ref_key:"waterfall",ref:G},{left:d((({leftList:e})=>[(i(!0),f(m,null,g(e,((e,a)=>(i(),n(t,{class:"left-warter",key:a,onClick:a=>D(e)},{default:d((()=>[p(s,{threshold:"-450","border-radius":"14rpx 14rpx 0 0",image:e.imageUrl,index:a},null,8,["image","index"]),p(t,{style:{"background-color":"#1a1a1a",padding:"10rpx 0","border-radius":"0 0 14rpx 14rpx"}},{default:d((()=>[p(t,{style:{padding:"10rpx 20rpx",color:"#f1f1f1"}},{default:d((()=>[v(b(e.styleName),1)])),_:2},1024),p(t,{class:"c-9 flex justify-between",style:{padding:"10rpx 20rpx"}},{default:d((()=>[p(t,{style:{"align-items":"center",display:"flex"}},{default:d((()=>[p(o,{src:e.avatar,style:{width:"40rpx",height:"40rpx","border-radius":"50%"}},null,8,["src"]),p(t,{style:{"margin-left":"10rpx"}},{default:d((()=>[v(b(e.nickname),1)])),_:2},1024)])),_:2},1024),p(t,{style:{"align-items":"center",display:"flex"}},{default:d((()=>[p(c,{name:"star",size:"28"}),p(h,{style:{"margin-left":"4rpx"}},{default:d((()=>[v(b(e.collectNum),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),right:d((({rightList:e})=>[(i(!0),f(m,null,g(e,((e,a)=>(i(),n(t,{class:"right-warter",key:a,onClick:a=>D(e)},{default:d((()=>[p(s,{threshold:"-450","border-radius":"14rpx 14rpx 0 0",image:e.imageUrl,index:a},null,8,["image","index"]),p(t,{style:{"background-color":"#1a1a1a",padding:"10rpx 0","border-radius":"0 0 14rpx 14rpx"}},{default:d((()=>[p(t,{style:{padding:"10rpx 20rpx","padding-top":"20rpx",color:"#f1f1f1"}},{default:d((()=>[v(b(e.styleName),1)])),_:2},1024),p(t,{class:"c-9 flex justify-between",style:{padding:"10rpx 20rpx"}},{default:d((()=>[p(t,{style:{"align-items":"center",display:"flex"}},{default:d((()=>[p(o,{src:e.avatar,style:{width:"40rpx",height:"40rpx","border-radius":"50%"}},null,8,["src"]),p(t,{style:{"margin-left":"10rpx"}},{default:d((()=>[v(b(e.nickname),1)])),_:2},1024)])),_:2},1024),p(t,{style:{"align-items":"center",display:"flex"}},{default:d((()=>[p(c,{name:"star",size:"28"}),p(h,{style:{"margin-left":"4rpx"}},{default:d((()=>[v(b(e.collectNum),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue"]),0==M.value?(i(),n(B,{key:0,emptyContent:"分类暂无投稿"})):y("",!0)])),_:1}),p(R)])),_:1})}}},[["__scopeId","data-v-3fb5e74e"]]);export{H as default};
